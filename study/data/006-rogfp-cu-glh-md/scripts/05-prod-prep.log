2024-05-28 11:42:13.102-04:00 | DEBUG    | metalflare.simulation.contexts:update:166 - Updating context:
{}
2024-05-28 11:42:13.102-04:00 | INFO     | metalflare.simulation.contexts:from_yaml:151 - Loading YAML context from ../../../methods/04-amber-simulations/base.yml
2024-05-28 11:42:13.105-04:00 | DEBUG    | metalflare.simulation.contexts:from_yaml:155 - YAML data:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'add_lines_tleap': ['addAtomTypes { {"cc" "C" "sp2"} {"cd" "C" "sp2"} {"cf" "C" "sp2"} ', '{"c" "C" "sp2"} {"nd" "N" "sp2"} {"nc" "N" "sp2"} {"ne" "N" "sp2"}', '{"nf" "N" "sp2"} {"ha" "H" "sp3"} {"oh" "O" "sp3"} }', 'xFPparams = loadamberparams ../../../methods/03-tleap/cro/frcmod.xFPchromophores.2022', 'loadOff ../../../methods/03-tleap/cro/xFPchromophores.lib.2022']}
2024-05-28 11:42:13.105-04:00 | DEBUG    | metalflare.simulation.contexts:update:166 - Updating context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'add_lines_tleap': ['addAtomTypes { {"cc" "C" "sp2"} {"cd" "C" "sp2"} {"cf" "C" "sp2"} ', '{"c" "C" "sp2"} {"nd" "N" "sp2"} {"nc" "N" "sp2"} {"ne" "N" "sp2"}', '{"nf" "N" "sp2"} {"ha" "H" "sp3"} {"oh" "O" "sp3"} }', 'xFPparams = loadamberparams ../../../methods/03-tleap/cro/frcmod.xFPchromophores.2022', 'loadOff ../../../methods/03-tleap/cro/xFPchromophores.lib.2022']}
2024-05-28 11:42:13.105-04:00 | INFO     | metalflare.simulation.contexts:from_yaml:151 - Loading YAML context from ../../../methods/04-amber-simulations/slurm-runs.yml
2024-05-28 11:42:13.108-04:00 | DEBUG    | metalflare.simulation.contexts:from_yaml:155 - YAML data:
{'write': True, 'submit': False, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'cp ../../02-prep/mol.inpcrd ./inputs', 'cp ../../02-prep/mol.prmtop ./inputs', '', 'mkdir -p outputs/', './run.sh', '', 'touch CALC_DONE']}
2024-05-28 11:42:13.108-04:00 | DEBUG    | metalflare.simulation.contexts:update:166 - Updating context:
{'write': True, 'submit': False, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'cp ../../02-prep/mol.inpcrd ./inputs', 'cp ../../02-prep/mol.prmtop ./inputs', '', 'mkdir -p outputs/', './run.sh', '', 'touch CALC_DONE']}
2024-05-28 11:42:13.109-04:00 | INFO     | metalflare.simulation.contexts:from_yaml:151 - Loading YAML context from /tmp/tmp.glB2U3R5OZ
2024-05-28 11:42:13.114-04:00 | DEBUG    | metalflare.simulation.contexts:from_yaml:155 - YAML data:
{'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'compute_platform': 'cuda', 'sbatch_options': {'nodes': 1, 'ntasks-per-node': 2, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '6-00:00:00', 'cluster': 'gpu', 'partition': 'a100', 'gres': 'gpu:1', 'account': 'jdurrant'}, 'stages': [{'stage_name': '08_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/../../04-relax/run-03/outputs/07_relax_npt.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 50000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '09_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '10_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}]}
2024-05-28 11:42:13.115-04:00 | DEBUG    | metalflare.simulation.contexts:update:166 - Updating context:
{'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'compute_platform': 'cuda', 'sbatch_options': {'nodes': 1, 'ntasks-per-node': 2, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '6-00:00:00', 'cluster': 'gpu', 'partition': 'a100', 'gres': 'gpu:1', 'account': 'jdurrant'}, 'stages': [{'stage_name': '08_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/../../04-relax/run-03/outputs/07_relax_npt.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 50000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '09_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '10_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}]}
2024-05-28 11:42:13.119-04:00 | DEBUG    | metalflare.simulation.contexts:get:180 - Retrieved context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'cuda', 'cpu_cores': None, 'input_kwargs': None, 'stage_name': None, 'stages': [{'stage_name': '08_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/../../04-relax/run-03/outputs/07_relax_npt.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 50000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '09_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '10_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': None, 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': None, 'coord_path': None, 'topo_path': None, 'restart_path': None, 'prev_coordinate_path': None, 'prev_restart_path': None, 'ref_coord_path': None, 'splits': 1, 'sbatch_options': {'nodes': 1, 'ntasks-per-node': 2, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '6-00:00:00', 'cluster': 'gpu', 'partition': 'a100', 'gres': 'gpu:1', 'account': 'jdurrant', 'job-name': 'metalflare/003/05-prod/run-03'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'cp ../../02-prep/mol.inpcrd ./inputs', 'cp ../../02-prep/mol.prmtop ./inputs', '', 'mkdir -p outputs/', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/05-prod/run-03/run.sh', 'slurm_path': '../simulations/05-prod/run-03/submit.slurm', 'write': True, 'write_dir': '../simulations/05-prod/run-03/inputs', 'submit': False, 'work_dir': None, 'yaml_path': '/tmp/tmp.glB2U3R5OZ', 'add_lines_tleap': ['addAtomTypes { {"cc" "C" "sp2"} {"cd" "C" "sp2"} {"cf" "C" "sp2"} ', '{"c" "C" "sp2"} {"nd" "N" "sp2"} {"nc" "N" "sp2"} {"ne" "N" "sp2"}', '{"nf" "N" "sp2"} {"ha" "H" "sp3"} {"oh" "O" "sp3"} }', 'xFPparams = loadamberparams ../../../methods/03-tleap/cro/frcmod.xFPchromophores.2022', 'loadOff ../../../methods/03-tleap/cro/xFPchromophores.lib.2022']}
2024-05-28 11:42:13.119-04:00 | INFO     | metalflare.simulation.run:prepare_slurm_lines:65 - Preparing slurm submission script
2024-05-28 11:42:13.119-04:00 | DEBUG    | metalflare.simulation.run:prepare_slurm_lines:72 - Slurm script:
#!/bin/bash
#SBATCH --nodes=1
#SBATCH --ntasks-per-node=2
#SBATCH --output=slurm-%j.out
#SBATCH --error=slurm-%j.err
#SBATCH --time=6-00:00:00
#SBATCH --cluster=gpu
#SBATCH --partition=a100
#SBATCH --gres=gpu:1
#SBATCH --account=jdurrant
#SBATCH --job-name=metalflare/003/05-prod/run-03

# Load environment
module purge
module load gcc/8.2.0
module load openmpi/4.0.3
module load amber/22

cp ../../02-prep/mol.inpcrd ./inputs
cp ../../02-prep/mol.prmtop ./inputs

mkdir -p outputs/
./run.sh

touch CALC_DONE

2024-05-28 11:42:13.119-04:00 | INFO     | metalflare.simulation.run:prepare_slurm_lines:74 - Writing submissions script at ../simulations/05-prod/run-03/submit.slurm
2024-05-28 11:42:13.120-04:00 | INFO     | metalflare.simulation.amber.run:prepare:233 - Prepare simulations
2024-05-28 11:42:13.121-04:00 | DEBUG    | metalflare.simulation.amber.run:prepare:236 - There are multiple stages
2024-05-28 11:42:13.121-04:00 | DEBUG    | metalflare.simulation.contexts:update:166 - Updating context:
{'stage_name': '08_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/../../04-relax/run-03/outputs/07_relax_npt.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 50000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}
2024-05-28 11:42:13.121-04:00 | INFO     | metalflare.simulation.amber.run:prepare:245 - Preparing stage 0
2024-05-28 11:42:13.121-04:00 | INFO     | metalflare.simulation.amber.run:prepare_context:25 - Preparing context for Amber simulation
2024-05-28 11:42:13.121-04:00 | DEBUG    | metalflare.simulation.contexts:get:180 - Retrieved context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'cuda', 'cpu_cores': None, 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 50000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}, 'stage_name': '08_prod_npt', 'stages': [{'stage_name': '08_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/../../04-relax/run-03/outputs/07_relax_npt.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 50000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '09_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '10_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': None, 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': None, 'coord_path': None, 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'restart_path': None, 'prev_coordinate_path': None, 'prev_restart_path': '$SLURM_SUBMIT_DIR/../../04-relax/run-03/outputs/07_relax_npt.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'splits': 1, 'sbatch_options': {'nodes': 1, 'ntasks-per-node': 2, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '6-00:00:00', 'cluster': 'gpu', 'partition': 'a100', 'gres': 'gpu:1', 'account': 'jdurrant', 'job-name': 'metalflare/003/05-prod/run-03'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'cp ../../02-prep/mol.inpcrd ./inputs', 'cp ../../02-prep/mol.prmtop ./inputs', '', 'mkdir -p outputs/', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/05-prod/run-03/run.sh', 'slurm_path': '../simulations/05-prod/run-03/submit.slurm', 'write': True, 'write_dir': '../simulations/05-prod/run-03/inputs', 'submit': False, 'work_dir': None, 'yaml_path': '/tmp/tmp.glB2U3R5OZ', 'add_lines_tleap': ['addAtomTypes { {"cc" "C" "sp2"} {"cd" "C" "sp2"} {"cf" "C" "sp2"} ', '{"c" "C" "sp2"} {"nd" "N" "sp2"} {"nc" "N" "sp2"} {"ne" "N" "sp2"}', '{"nf" "N" "sp2"} {"ha" "H" "sp3"} {"oh" "O" "sp3"} }', 'xFPparams = loadamberparams ../../../methods/03-tleap/cro/frcmod.xFPchromophores.2022', 'loadOff ../../../methods/03-tleap/cro/xFPchromophores.lib.2022']}
2024-05-28 11:42:13.122-04:00 | DEBUG    | metalflare.simulation.contexts:update:166 - Updating context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'cuda', 'cpu_cores': None, 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 50000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}, 'stage_name': '08_prod_npt', 'stages': [{'stage_name': '08_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/../../04-relax/run-03/outputs/07_relax_npt.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 50000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '09_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '10_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': '$SLURM_SUBMIT_DIR/inputs/08_prod_npt.in', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': '$SLURM_SUBMIT_DIR/outputs/08_prod_npt.out', 'coord_path': '$SLURM_SUBMIT_DIR/outputs/08_prod_npt.nc', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'restart_path': '$SLURM_SUBMIT_DIR/outputs/08_prod_npt.rst', 'prev_coordinate_path': None, 'prev_restart_path': '$SLURM_SUBMIT_DIR/../../04-relax/run-03/outputs/07_relax_npt.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'splits': 1, 'sbatch_options': {'nodes': 1, 'ntasks-per-node': 2, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '6-00:00:00', 'cluster': 'gpu', 'partition': 'a100', 'gres': 'gpu:1', 'account': 'jdurrant', 'job-name': 'metalflare/003/05-prod/run-03'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'cp ../../02-prep/mol.inpcrd ./inputs', 'cp ../../02-prep/mol.prmtop ./inputs', '', 'mkdir -p outputs/', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/05-prod/run-03/run.sh', 'slurm_path': '../simulations/05-prod/run-03/submit.slurm', 'write': True, 'write_dir': '../simulations/05-prod/run-03/inputs', 'submit': False, 'work_dir': None, 'yaml_path': '/tmp/tmp.glB2U3R5OZ', 'add_lines_tleap': ['addAtomTypes { {"cc" "C" "sp2"} {"cd" "C" "sp2"} {"cf" "C" "sp2"} ', '{"c" "C" "sp2"} {"nd" "N" "sp2"} {"nc" "N" "sp2"} {"ne" "N" "sp2"}', '{"nf" "N" "sp2"} {"ha" "H" "sp3"} {"oh" "O" "sp3"} }', 'xFPparams = loadamberparams ../../../methods/03-tleap/cro/frcmod.xFPchromophores.2022', 'loadOff ../../../methods/03-tleap/cro/xFPchromophores.lib.2022'], 'run_dir': '$SLURM_SUBMIT_DIR/outputs', 'mdinfo_path': '$SLURM_SUBMIT_DIR/outputs/08_prod_npt.mdinfo'}
2024-05-28 11:42:13.122-04:00 | INFO     | metalflare.simulation.contexts:validate:212 - Validating with: AmberContextValidator
2024-05-28 11:42:13.122-04:00 | DEBUG    | metalflare.simulation.contexts:get:180 - Retrieved context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'cuda', 'cpu_cores': None, 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 50000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}, 'stage_name': '08_prod_npt', 'stages': [{'stage_name': '08_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/../../04-relax/run-03/outputs/07_relax_npt.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 50000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '09_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '10_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': '$SLURM_SUBMIT_DIR/inputs/08_prod_npt.in', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': '$SLURM_SUBMIT_DIR/outputs/08_prod_npt.out', 'coord_path': '$SLURM_SUBMIT_DIR/outputs/08_prod_npt.nc', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'restart_path': '$SLURM_SUBMIT_DIR/outputs/08_prod_npt.rst', 'prev_coordinate_path': None, 'prev_restart_path': '$SLURM_SUBMIT_DIR/../../04-relax/run-03/outputs/07_relax_npt.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'splits': 1, 'sbatch_options': {'nodes': 1, 'ntasks-per-node': 2, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '6-00:00:00', 'cluster': 'gpu', 'partition': 'a100', 'gres': 'gpu:1', 'account': 'jdurrant', 'job-name': 'metalflare/003/05-prod/run-03'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'cp ../../02-prep/mol.inpcrd ./inputs', 'cp ../../02-prep/mol.prmtop ./inputs', '', 'mkdir -p outputs/', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/05-prod/run-03/run.sh', 'slurm_path': '../simulations/05-prod/run-03/submit.slurm', 'write': True, 'write_dir': '../simulations/05-prod/run-03/inputs', 'submit': False, 'work_dir': None, 'yaml_path': '/tmp/tmp.glB2U3R5OZ', 'add_lines_tleap': ['addAtomTypes { {"cc" "C" "sp2"} {"cd" "C" "sp2"} {"cf" "C" "sp2"} ', '{"c" "C" "sp2"} {"nd" "N" "sp2"} {"nc" "N" "sp2"} {"ne" "N" "sp2"}', '{"nf" "N" "sp2"} {"ha" "H" "sp3"} {"oh" "O" "sp3"} }', 'xFPparams = loadamberparams ../../../methods/03-tleap/cro/frcmod.xFPchromophores.2022', 'loadOff ../../../methods/03-tleap/cro/xFPchromophores.lib.2022'], 'run_dir': '$SLURM_SUBMIT_DIR/outputs', 'mdinfo_path': '$SLURM_SUBMIT_DIR/outputs/08_prod_npt.mdinfo'}
2024-05-28 11:42:13.122-04:00 | DEBUG    | metalflare.simulation.contexts:validate:221 - Checking ff_protein
2024-05-28 11:42:13.122-04:00 | DEBUG    | metalflare.simulation.contexts:validate:228 -   Valid: ff19SB
2024-05-28 11:42:13.123-04:00 | DEBUG    | metalflare.simulation.contexts:validate:221 - Checking ff_water
2024-05-28 11:42:13.123-04:00 | DEBUG    | metalflare.simulation.contexts:validate:228 -   Valid: opc3
2024-05-28 11:42:13.123-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check ff_dna
2024-05-28 11:42:13.123-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check ff_rna
2024-05-28 11:42:13.123-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check ff_glycam
2024-05-28 11:42:13.124-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check ff_lipid
2024-05-28 11:42:13.124-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check ff_small_molecule
2024-05-28 11:42:13.124-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check ff_ions
2024-05-28 11:42:13.124-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check cation_identity
2024-05-28 11:42:13.124-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check anion_identity
2024-05-28 11:42:13.124-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check system_charge
2024-05-28 11:42:13.125-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check neutralize_charge
2024-05-28 11:42:13.125-04:00 | DEBUG    | metalflare.simulation.contexts:validate:221 - Checking extra_cations
2024-05-28 11:42:13.125-04:00 | DEBUG    | metalflare.simulation.contexts:validate:235 -   Valid: 0
2024-05-28 11:42:13.125-04:00 | DEBUG    | metalflare.simulation.contexts:validate:221 - Checking extra_anions
2024-05-28 11:42:13.125-04:00 | DEBUG    | metalflare.simulation.contexts:validate:235 -   Valid: 0
2024-05-28 11:42:13.126-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check solvent_ionic_strength
2024-05-28 11:42:13.126-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check solvent_padding
2024-05-28 11:42:13.126-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check verbosity
2024-05-28 11:42:13.126-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check scratch_dir
2024-05-28 11:42:13.126-04:00 | DEBUG    | metalflare.simulation.contexts:validate:221 - Checking compute_platform
2024-05-28 11:42:13.127-04:00 | DEBUG    | metalflare.simulation.contexts:validate:228 -   Valid: cuda
2024-05-28 11:42:13.127-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check cpu_cores
2024-05-28 11:42:13.127-04:00 | DEBUG    | metalflare.simulation.contexts:validate:221 - Checking input_kwargs
2024-05-28 11:42:13.127-04:00 | DEBUG    | metalflare.simulation.contexts:validate:235 -   Valid: {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 50000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}
2024-05-28 11:42:13.128-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check stage_name
2024-05-28 11:42:13.128-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check stages
2024-05-28 11:42:13.128-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check input_dir
2024-05-28 11:42:13.128-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check input_path
2024-05-28 11:42:13.128-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check output_dir
2024-05-28 11:42:13.129-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check output_path
2024-05-28 11:42:13.129-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check coord_path
2024-05-28 11:42:13.129-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check topo_path
2024-05-28 11:42:13.129-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check restart_path
2024-05-28 11:42:13.130-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check prev_coordinate_path
2024-05-28 11:42:13.130-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check prev_restart_path
2024-05-28 11:42:13.130-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check ref_coord_path
2024-05-28 11:42:13.130-04:00 | DEBUG    | metalflare.simulation.contexts:validate:221 - Checking splits
2024-05-28 11:42:13.130-04:00 | DEBUG    | metalflare.simulation.contexts:validate:235 -   Valid: 1
2024-05-28 11:42:13.131-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check sbatch_options
2024-05-28 11:42:13.131-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check slurm_lines
2024-05-28 11:42:13.131-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check run_path
2024-05-28 11:42:13.131-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check slurm_path
2024-05-28 11:42:13.131-04:00 | DEBUG    | metalflare.simulation.contexts:validate:221 - Checking write
2024-05-28 11:42:13.132-04:00 | DEBUG    | metalflare.simulation.contexts:validate:235 -   Valid: True
2024-05-28 11:42:13.132-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check write_dir
2024-05-28 11:42:13.133-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check submit
2024-05-28 11:42:13.133-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check work_dir
2024-05-28 11:42:13.133-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check yaml_path
2024-05-28 11:42:13.133-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check add_lines_tleap
2024-05-28 11:42:13.134-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check run_dir
2024-05-28 11:42:13.134-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check mdinfo_path
2024-05-28 11:42:13.134-04:00 | DEBUG    | metalflare.simulation.contexts:get:180 - Retrieved context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'cuda', 'cpu_cores': None, 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 50000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}, 'stage_name': '08_prod_npt', 'stages': [{'stage_name': '08_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/../../04-relax/run-03/outputs/07_relax_npt.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 50000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '09_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '10_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': '$SLURM_SUBMIT_DIR/inputs/08_prod_npt.in', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': '$SLURM_SUBMIT_DIR/outputs/08_prod_npt.out', 'coord_path': '$SLURM_SUBMIT_DIR/outputs/08_prod_npt.nc', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'restart_path': '$SLURM_SUBMIT_DIR/outputs/08_prod_npt.rst', 'prev_coordinate_path': None, 'prev_restart_path': '$SLURM_SUBMIT_DIR/../../04-relax/run-03/outputs/07_relax_npt.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'splits': 1, 'sbatch_options': {'nodes': 1, 'ntasks-per-node': 2, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '6-00:00:00', 'cluster': 'gpu', 'partition': 'a100', 'gres': 'gpu:1', 'account': 'jdurrant', 'job-name': 'metalflare/003/05-prod/run-03'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'cp ../../02-prep/mol.inpcrd ./inputs', 'cp ../../02-prep/mol.prmtop ./inputs', '', 'mkdir -p outputs/', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/05-prod/run-03/run.sh', 'slurm_path': '../simulations/05-prod/run-03/submit.slurm', 'write': True, 'write_dir': '../simulations/05-prod/run-03/inputs', 'submit': False, 'work_dir': None, 'yaml_path': '/tmp/tmp.glB2U3R5OZ', 'add_lines_tleap': ['addAtomTypes { {"cc" "C" "sp2"} {"cd" "C" "sp2"} {"cf" "C" "sp2"} ', '{"c" "C" "sp2"} {"nd" "N" "sp2"} {"nc" "N" "sp2"} {"ne" "N" "sp2"}', '{"nf" "N" "sp2"} {"ha" "H" "sp3"} {"oh" "O" "sp3"} }', 'xFPparams = loadamberparams ../../../methods/03-tleap/cro/frcmod.xFPchromophores.2022', 'loadOff ../../../methods/03-tleap/cro/xFPchromophores.lib.2022'], 'run_dir': '$SLURM_SUBMIT_DIR/outputs', 'mdinfo_path': '$SLURM_SUBMIT_DIR/outputs/08_prod_npt.mdinfo'}
2024-05-28 11:42:13.135-04:00 | INFO     | metalflare.simulation.amber.run:get_stage_input_lines:153 - Preparing input lines for stage 08_prod_npt
2024-05-28 11:42:13.135-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: irest=1,
2024-05-28 11:42:13.135-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntx=5,
2024-05-28 11:42:13.135-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ig=-1,
2024-05-28 11:42:13.136-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: dt=0.002,
2024-05-28 11:42:13.136-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: nstlim=50000000,
2024-05-28 11:42:13.136-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: nscm=500,
2024-05-28 11:42:13.136-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntr=0,
2024-05-28 11:42:13.137-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntb=2,
2024-05-28 11:42:13.137-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntf=2,
2024-05-28 11:42:13.137-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntc=2,
2024-05-28 11:42:13.137-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: cut=10.0,
2024-05-28 11:42:13.137-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntt=3,
2024-05-28 11:42:13.138-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: temp0=300.0,
2024-05-28 11:42:13.138-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: gamma_ln=5.0,
2024-05-28 11:42:13.138-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntp=1,
2024-05-28 11:42:13.142-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: barostat=2,
2024-05-28 11:42:13.142-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: pres0=1.01325,
2024-05-28 11:42:13.143-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: mcbarint=100,
2024-05-28 11:42:13.143-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: comp=44.6,
2024-05-28 11:42:13.143-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: taup=1.0,
2024-05-28 11:42:13.143-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntxo=2,
2024-05-28 11:42:13.143-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntwr=5000,
2024-05-28 11:42:13.144-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntpr=500,
2024-05-28 11:42:13.144-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntwx=5000,
2024-05-28 11:42:13.145-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ioutfm=1,
2024-05-28 11:42:13.145-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: iwrap=1,
2024-05-28 11:42:13.145-04:00 | INFO     | metalflare.simulation.amber.run:prepare_stage:212 - Writing input file at ../simulations/05-prod/run-03/inputs/08_prod_npt.in
2024-05-28 11:42:13.146-04:00 | INFO     | metalflare.simulation.amber.run:prepare_stage:221 - Adding stage's amber command to run script
2024-05-28 11:42:13.146-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_run_command:124 - Amber command: %s
2024-05-28 11:42:13.146-04:00 | DEBUG    | metalflare.simulation.contexts:update:166 - Updating context:
{'stage_name': '09_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}
2024-05-28 11:42:13.146-04:00 | INFO     | metalflare.simulation.amber.run:prepare:245 - Preparing stage 1
2024-05-28 11:42:13.147-04:00 | INFO     | metalflare.simulation.amber.run:prepare_context:25 - Preparing context for Amber simulation
2024-05-28 11:42:13.147-04:00 | DEBUG    | metalflare.simulation.contexts:get:180 - Retrieved context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'cuda', 'cpu_cores': None, 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}, 'stage_name': '09_prod_npt', 'stages': [{'stage_name': '08_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/../../04-relax/run-03/outputs/07_relax_npt.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 50000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '09_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '10_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': '$SLURM_SUBMIT_DIR/inputs/08_prod_npt.in', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': '$SLURM_SUBMIT_DIR/outputs/08_prod_npt.out', 'coord_path': '$SLURM_SUBMIT_DIR/outputs/08_prod_npt.nc', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'restart_path': '$SLURM_SUBMIT_DIR/outputs/08_prod_npt.rst', 'prev_coordinate_path': None, 'prev_restart_path': '$SLURM_SUBMIT_DIR/outputs/08_prod_npt.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'splits': 1, 'sbatch_options': {'nodes': 1, 'ntasks-per-node': 2, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '6-00:00:00', 'cluster': 'gpu', 'partition': 'a100', 'gres': 'gpu:1', 'account': 'jdurrant', 'job-name': 'metalflare/003/05-prod/run-03'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'cp ../../02-prep/mol.inpcrd ./inputs', 'cp ../../02-prep/mol.prmtop ./inputs', '', 'mkdir -p outputs/', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/05-prod/run-03/run.sh', 'slurm_path': '../simulations/05-prod/run-03/submit.slurm', 'write': True, 'write_dir': '../simulations/05-prod/run-03/inputs', 'submit': False, 'work_dir': None, 'yaml_path': '/tmp/tmp.glB2U3R5OZ', 'add_lines_tleap': ['addAtomTypes { {"cc" "C" "sp2"} {"cd" "C" "sp2"} {"cf" "C" "sp2"} ', '{"c" "C" "sp2"} {"nd" "N" "sp2"} {"nc" "N" "sp2"} {"ne" "N" "sp2"}', '{"nf" "N" "sp2"} {"ha" "H" "sp3"} {"oh" "O" "sp3"} }', 'xFPparams = loadamberparams ../../../methods/03-tleap/cro/frcmod.xFPchromophores.2022', 'loadOff ../../../methods/03-tleap/cro/xFPchromophores.lib.2022'], 'run_dir': '$SLURM_SUBMIT_DIR/outputs', 'mdinfo_path': '$SLURM_SUBMIT_DIR/outputs/08_prod_npt.mdinfo', 'prev_coord_path': '$SLURM_SUBMIT_DIR/outputs/08_prod_npt.nc'}
2024-05-28 11:42:13.147-04:00 | DEBUG    | metalflare.simulation.contexts:update:166 - Updating context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'cuda', 'cpu_cores': None, 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}, 'stage_name': '09_prod_npt', 'stages': [{'stage_name': '08_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/../../04-relax/run-03/outputs/07_relax_npt.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 50000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '09_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '10_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': '$SLURM_SUBMIT_DIR/inputs/09_prod_npt.in', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': '$SLURM_SUBMIT_DIR/outputs/09_prod_npt.out', 'coord_path': '$SLURM_SUBMIT_DIR/outputs/09_prod_npt.nc', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'restart_path': '$SLURM_SUBMIT_DIR/outputs/09_prod_npt.rst', 'prev_coordinate_path': None, 'prev_restart_path': '$SLURM_SUBMIT_DIR/outputs/08_prod_npt.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'splits': 1, 'sbatch_options': {'nodes': 1, 'ntasks-per-node': 2, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '6-00:00:00', 'cluster': 'gpu', 'partition': 'a100', 'gres': 'gpu:1', 'account': 'jdurrant', 'job-name': 'metalflare/003/05-prod/run-03'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'cp ../../02-prep/mol.inpcrd ./inputs', 'cp ../../02-prep/mol.prmtop ./inputs', '', 'mkdir -p outputs/', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/05-prod/run-03/run.sh', 'slurm_path': '../simulations/05-prod/run-03/submit.slurm', 'write': True, 'write_dir': '../simulations/05-prod/run-03/inputs', 'submit': False, 'work_dir': None, 'yaml_path': '/tmp/tmp.glB2U3R5OZ', 'add_lines_tleap': ['addAtomTypes { {"cc" "C" "sp2"} {"cd" "C" "sp2"} {"cf" "C" "sp2"} ', '{"c" "C" "sp2"} {"nd" "N" "sp2"} {"nc" "N" "sp2"} {"ne" "N" "sp2"}', '{"nf" "N" "sp2"} {"ha" "H" "sp3"} {"oh" "O" "sp3"} }', 'xFPparams = loadamberparams ../../../methods/03-tleap/cro/frcmod.xFPchromophores.2022', 'loadOff ../../../methods/03-tleap/cro/xFPchromophores.lib.2022'], 'run_dir': '$SLURM_SUBMIT_DIR/outputs', 'mdinfo_path': '$SLURM_SUBMIT_DIR/outputs/09_prod_npt.mdinfo', 'prev_coord_path': '$SLURM_SUBMIT_DIR/outputs/08_prod_npt.nc'}
2024-05-28 11:42:13.147-04:00 | INFO     | metalflare.simulation.contexts:validate:212 - Validating with: AmberContextValidator
2024-05-28 11:42:13.147-04:00 | DEBUG    | metalflare.simulation.contexts:get:180 - Retrieved context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'cuda', 'cpu_cores': None, 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}, 'stage_name': '09_prod_npt', 'stages': [{'stage_name': '08_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/../../04-relax/run-03/outputs/07_relax_npt.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 50000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '09_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '10_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': '$SLURM_SUBMIT_DIR/inputs/09_prod_npt.in', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': '$SLURM_SUBMIT_DIR/outputs/09_prod_npt.out', 'coord_path': '$SLURM_SUBMIT_DIR/outputs/09_prod_npt.nc', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'restart_path': '$SLURM_SUBMIT_DIR/outputs/09_prod_npt.rst', 'prev_coordinate_path': None, 'prev_restart_path': '$SLURM_SUBMIT_DIR/outputs/08_prod_npt.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'splits': 1, 'sbatch_options': {'nodes': 1, 'ntasks-per-node': 2, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '6-00:00:00', 'cluster': 'gpu', 'partition': 'a100', 'gres': 'gpu:1', 'account': 'jdurrant', 'job-name': 'metalflare/003/05-prod/run-03'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'cp ../../02-prep/mol.inpcrd ./inputs', 'cp ../../02-prep/mol.prmtop ./inputs', '', 'mkdir -p outputs/', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/05-prod/run-03/run.sh', 'slurm_path': '../simulations/05-prod/run-03/submit.slurm', 'write': True, 'write_dir': '../simulations/05-prod/run-03/inputs', 'submit': False, 'work_dir': None, 'yaml_path': '/tmp/tmp.glB2U3R5OZ', 'add_lines_tleap': ['addAtomTypes { {"cc" "C" "sp2"} {"cd" "C" "sp2"} {"cf" "C" "sp2"} ', '{"c" "C" "sp2"} {"nd" "N" "sp2"} {"nc" "N" "sp2"} {"ne" "N" "sp2"}', '{"nf" "N" "sp2"} {"ha" "H" "sp3"} {"oh" "O" "sp3"} }', 'xFPparams = loadamberparams ../../../methods/03-tleap/cro/frcmod.xFPchromophores.2022', 'loadOff ../../../methods/03-tleap/cro/xFPchromophores.lib.2022'], 'run_dir': '$SLURM_SUBMIT_DIR/outputs', 'mdinfo_path': '$SLURM_SUBMIT_DIR/outputs/09_prod_npt.mdinfo', 'prev_coord_path': '$SLURM_SUBMIT_DIR/outputs/08_prod_npt.nc'}
2024-05-28 11:42:13.148-04:00 | DEBUG    | metalflare.simulation.contexts:validate:221 - Checking ff_protein
2024-05-28 11:42:13.148-04:00 | DEBUG    | metalflare.simulation.contexts:validate:228 -   Valid: ff19SB
2024-05-28 11:42:13.148-04:00 | DEBUG    | metalflare.simulation.contexts:validate:221 - Checking ff_water
2024-05-28 11:42:13.148-04:00 | DEBUG    | metalflare.simulation.contexts:validate:228 -   Valid: opc3
2024-05-28 11:42:13.148-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check ff_dna
2024-05-28 11:42:13.149-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check ff_rna
2024-05-28 11:42:13.149-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check ff_glycam
2024-05-28 11:42:13.149-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check ff_lipid
2024-05-28 11:42:13.149-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check ff_small_molecule
2024-05-28 11:42:13.149-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check ff_ions
2024-05-28 11:42:13.150-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check cation_identity
2024-05-28 11:42:13.150-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check anion_identity
2024-05-28 11:42:13.150-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check system_charge
2024-05-28 11:42:13.150-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check neutralize_charge
2024-05-28 11:42:13.151-04:00 | DEBUG    | metalflare.simulation.contexts:validate:221 - Checking extra_cations
2024-05-28 11:42:13.151-04:00 | DEBUG    | metalflare.simulation.contexts:validate:235 -   Valid: 0
2024-05-28 11:42:13.151-04:00 | DEBUG    | metalflare.simulation.contexts:validate:221 - Checking extra_anions
2024-05-28 11:42:13.151-04:00 | DEBUG    | metalflare.simulation.contexts:validate:235 -   Valid: 0
2024-05-28 11:42:13.151-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check solvent_ionic_strength
2024-05-28 11:42:13.152-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check solvent_padding
2024-05-28 11:42:13.152-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check verbosity
2024-05-28 11:42:13.152-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check scratch_dir
2024-05-28 11:42:13.152-04:00 | DEBUG    | metalflare.simulation.contexts:validate:221 - Checking compute_platform
2024-05-28 11:42:13.152-04:00 | DEBUG    | metalflare.simulation.contexts:validate:228 -   Valid: cuda
2024-05-28 11:42:13.153-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check cpu_cores
2024-05-28 11:42:13.153-04:00 | DEBUG    | metalflare.simulation.contexts:validate:221 - Checking input_kwargs
2024-05-28 11:42:13.153-04:00 | DEBUG    | metalflare.simulation.contexts:validate:235 -   Valid: {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}
2024-05-28 11:42:13.153-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check stage_name
2024-05-28 11:42:13.154-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check stages
2024-05-28 11:42:13.154-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check input_dir
2024-05-28 11:42:13.154-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check input_path
2024-05-28 11:42:13.154-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check output_dir
2024-05-28 11:42:13.154-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check output_path
2024-05-28 11:42:13.155-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check coord_path
2024-05-28 11:42:13.155-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check topo_path
2024-05-28 11:42:13.155-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check restart_path
2024-05-28 11:42:13.155-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check prev_coordinate_path
2024-05-28 11:42:13.156-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check prev_restart_path
2024-05-28 11:42:13.156-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check ref_coord_path
2024-05-28 11:42:13.156-04:00 | DEBUG    | metalflare.simulation.contexts:validate:221 - Checking splits
2024-05-28 11:42:13.156-04:00 | DEBUG    | metalflare.simulation.contexts:validate:235 -   Valid: 1
2024-05-28 11:42:13.156-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check sbatch_options
2024-05-28 11:42:13.157-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check slurm_lines
2024-05-28 11:42:13.157-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check run_path
2024-05-28 11:42:13.157-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check slurm_path
2024-05-28 11:42:13.158-04:00 | DEBUG    | metalflare.simulation.contexts:validate:221 - Checking write
2024-05-28 11:42:13.158-04:00 | DEBUG    | metalflare.simulation.contexts:validate:235 -   Valid: True
2024-05-28 11:42:13.158-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check write_dir
2024-05-28 11:42:13.158-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check submit
2024-05-28 11:42:13.159-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check work_dir
2024-05-28 11:42:13.159-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check yaml_path
2024-05-28 11:42:13.160-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check add_lines_tleap
2024-05-28 11:42:13.160-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check run_dir
2024-05-28 11:42:13.160-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check mdinfo_path
2024-05-28 11:42:13.160-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check prev_coord_path
2024-05-28 11:42:13.161-04:00 | DEBUG    | metalflare.simulation.contexts:get:180 - Retrieved context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'cuda', 'cpu_cores': None, 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}, 'stage_name': '09_prod_npt', 'stages': [{'stage_name': '08_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/../../04-relax/run-03/outputs/07_relax_npt.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 50000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '09_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '10_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': '$SLURM_SUBMIT_DIR/inputs/09_prod_npt.in', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': '$SLURM_SUBMIT_DIR/outputs/09_prod_npt.out', 'coord_path': '$SLURM_SUBMIT_DIR/outputs/09_prod_npt.nc', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'restart_path': '$SLURM_SUBMIT_DIR/outputs/09_prod_npt.rst', 'prev_coordinate_path': None, 'prev_restart_path': '$SLURM_SUBMIT_DIR/outputs/08_prod_npt.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'splits': 1, 'sbatch_options': {'nodes': 1, 'ntasks-per-node': 2, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '6-00:00:00', 'cluster': 'gpu', 'partition': 'a100', 'gres': 'gpu:1', 'account': 'jdurrant', 'job-name': 'metalflare/003/05-prod/run-03'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'cp ../../02-prep/mol.inpcrd ./inputs', 'cp ../../02-prep/mol.prmtop ./inputs', '', 'mkdir -p outputs/', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/05-prod/run-03/run.sh', 'slurm_path': '../simulations/05-prod/run-03/submit.slurm', 'write': True, 'write_dir': '../simulations/05-prod/run-03/inputs', 'submit': False, 'work_dir': None, 'yaml_path': '/tmp/tmp.glB2U3R5OZ', 'add_lines_tleap': ['addAtomTypes { {"cc" "C" "sp2"} {"cd" "C" "sp2"} {"cf" "C" "sp2"} ', '{"c" "C" "sp2"} {"nd" "N" "sp2"} {"nc" "N" "sp2"} {"ne" "N" "sp2"}', '{"nf" "N" "sp2"} {"ha" "H" "sp3"} {"oh" "O" "sp3"} }', 'xFPparams = loadamberparams ../../../methods/03-tleap/cro/frcmod.xFPchromophores.2022', 'loadOff ../../../methods/03-tleap/cro/xFPchromophores.lib.2022'], 'run_dir': '$SLURM_SUBMIT_DIR/outputs', 'mdinfo_path': '$SLURM_SUBMIT_DIR/outputs/09_prod_npt.mdinfo', 'prev_coord_path': '$SLURM_SUBMIT_DIR/outputs/08_prod_npt.nc'}
2024-05-28 11:42:13.161-04:00 | INFO     | metalflare.simulation.amber.run:get_stage_input_lines:153 - Preparing input lines for stage 09_prod_npt
2024-05-28 11:42:13.161-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: irest=1,
2024-05-28 11:42:13.162-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntx=5,
2024-05-28 11:42:13.162-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ig=-1,
2024-05-28 11:42:13.162-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: dt=0.002,
2024-05-28 11:42:13.162-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: nstlim=100000000,
2024-05-28 11:42:13.162-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: nscm=500,
2024-05-28 11:42:13.163-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntr=0,
2024-05-28 11:42:13.163-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntb=2,
2024-05-28 11:42:13.163-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntf=2,
2024-05-28 11:42:13.163-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntc=2,
2024-05-28 11:42:13.164-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: cut=10.0,
2024-05-28 11:42:13.164-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntt=3,
2024-05-28 11:42:13.164-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: temp0=300.0,
2024-05-28 11:42:13.164-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: gamma_ln=5.0,
2024-05-28 11:42:13.164-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntp=1,
2024-05-28 11:42:13.165-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: barostat=2,
2024-05-28 11:42:13.165-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: pres0=1.01325,
2024-05-28 11:42:13.165-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: mcbarint=100,
2024-05-28 11:42:13.165-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: comp=44.6,
2024-05-28 11:42:13.166-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: taup=1.0,
2024-05-28 11:42:13.166-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntxo=2,
2024-05-28 11:42:13.166-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntwr=5000,
2024-05-28 11:42:13.166-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntpr=500,
2024-05-28 11:42:13.166-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntwx=5000,
2024-05-28 11:42:13.167-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ioutfm=1,
2024-05-28 11:42:13.167-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: iwrap=1,
2024-05-28 11:42:13.167-04:00 | INFO     | metalflare.simulation.amber.run:prepare_stage:212 - Writing input file at ../simulations/05-prod/run-03/inputs/09_prod_npt.in
2024-05-28 11:42:13.168-04:00 | INFO     | metalflare.simulation.amber.run:prepare_stage:221 - Adding stage's amber command to run script
2024-05-28 11:42:13.168-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_run_command:124 - Amber command: %s
2024-05-28 11:42:13.169-04:00 | DEBUG    | metalflare.simulation.contexts:update:166 - Updating context:
{'stage_name': '10_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}
2024-05-28 11:42:13.169-04:00 | INFO     | metalflare.simulation.amber.run:prepare:245 - Preparing stage 2
2024-05-28 11:42:13.169-04:00 | INFO     | metalflare.simulation.amber.run:prepare_context:25 - Preparing context for Amber simulation
2024-05-28 11:42:13.169-04:00 | DEBUG    | metalflare.simulation.contexts:get:180 - Retrieved context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'cuda', 'cpu_cores': None, 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}, 'stage_name': '10_prod_npt', 'stages': [{'stage_name': '08_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/../../04-relax/run-03/outputs/07_relax_npt.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 50000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '09_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '10_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': '$SLURM_SUBMIT_DIR/inputs/09_prod_npt.in', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': '$SLURM_SUBMIT_DIR/outputs/09_prod_npt.out', 'coord_path': '$SLURM_SUBMIT_DIR/outputs/09_prod_npt.nc', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'restart_path': '$SLURM_SUBMIT_DIR/outputs/09_prod_npt.rst', 'prev_coordinate_path': None, 'prev_restart_path': '$SLURM_SUBMIT_DIR/outputs/09_prod_npt.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'splits': 1, 'sbatch_options': {'nodes': 1, 'ntasks-per-node': 2, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '6-00:00:00', 'cluster': 'gpu', 'partition': 'a100', 'gres': 'gpu:1', 'account': 'jdurrant', 'job-name': 'metalflare/003/05-prod/run-03'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'cp ../../02-prep/mol.inpcrd ./inputs', 'cp ../../02-prep/mol.prmtop ./inputs', '', 'mkdir -p outputs/', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/05-prod/run-03/run.sh', 'slurm_path': '../simulations/05-prod/run-03/submit.slurm', 'write': True, 'write_dir': '../simulations/05-prod/run-03/inputs', 'submit': False, 'work_dir': None, 'yaml_path': '/tmp/tmp.glB2U3R5OZ', 'add_lines_tleap': ['addAtomTypes { {"cc" "C" "sp2"} {"cd" "C" "sp2"} {"cf" "C" "sp2"} ', '{"c" "C" "sp2"} {"nd" "N" "sp2"} {"nc" "N" "sp2"} {"ne" "N" "sp2"}', '{"nf" "N" "sp2"} {"ha" "H" "sp3"} {"oh" "O" "sp3"} }', 'xFPparams = loadamberparams ../../../methods/03-tleap/cro/frcmod.xFPchromophores.2022', 'loadOff ../../../methods/03-tleap/cro/xFPchromophores.lib.2022'], 'run_dir': '$SLURM_SUBMIT_DIR/outputs', 'mdinfo_path': '$SLURM_SUBMIT_DIR/outputs/09_prod_npt.mdinfo', 'prev_coord_path': '$SLURM_SUBMIT_DIR/outputs/09_prod_npt.nc'}
2024-05-28 11:42:13.170-04:00 | DEBUG    | metalflare.simulation.contexts:update:166 - Updating context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'cuda', 'cpu_cores': None, 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}, 'stage_name': '10_prod_npt', 'stages': [{'stage_name': '08_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/../../04-relax/run-03/outputs/07_relax_npt.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 50000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '09_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '10_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': '$SLURM_SUBMIT_DIR/inputs/10_prod_npt.in', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': '$SLURM_SUBMIT_DIR/outputs/10_prod_npt.out', 'coord_path': '$SLURM_SUBMIT_DIR/outputs/10_prod_npt.nc', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'restart_path': '$SLURM_SUBMIT_DIR/outputs/10_prod_npt.rst', 'prev_coordinate_path': None, 'prev_restart_path': '$SLURM_SUBMIT_DIR/outputs/09_prod_npt.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'splits': 1, 'sbatch_options': {'nodes': 1, 'ntasks-per-node': 2, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '6-00:00:00', 'cluster': 'gpu', 'partition': 'a100', 'gres': 'gpu:1', 'account': 'jdurrant', 'job-name': 'metalflare/003/05-prod/run-03'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'cp ../../02-prep/mol.inpcrd ./inputs', 'cp ../../02-prep/mol.prmtop ./inputs', '', 'mkdir -p outputs/', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/05-prod/run-03/run.sh', 'slurm_path': '../simulations/05-prod/run-03/submit.slurm', 'write': True, 'write_dir': '../simulations/05-prod/run-03/inputs', 'submit': False, 'work_dir': None, 'yaml_path': '/tmp/tmp.glB2U3R5OZ', 'add_lines_tleap': ['addAtomTypes { {"cc" "C" "sp2"} {"cd" "C" "sp2"} {"cf" "C" "sp2"} ', '{"c" "C" "sp2"} {"nd" "N" "sp2"} {"nc" "N" "sp2"} {"ne" "N" "sp2"}', '{"nf" "N" "sp2"} {"ha" "H" "sp3"} {"oh" "O" "sp3"} }', 'xFPparams = loadamberparams ../../../methods/03-tleap/cro/frcmod.xFPchromophores.2022', 'loadOff ../../../methods/03-tleap/cro/xFPchromophores.lib.2022'], 'run_dir': '$SLURM_SUBMIT_DIR/outputs', 'mdinfo_path': '$SLURM_SUBMIT_DIR/outputs/10_prod_npt.mdinfo', 'prev_coord_path': '$SLURM_SUBMIT_DIR/outputs/09_prod_npt.nc'}
2024-05-28 11:42:13.170-04:00 | INFO     | metalflare.simulation.contexts:validate:212 - Validating with: AmberContextValidator
2024-05-28 11:42:13.170-04:00 | DEBUG    | metalflare.simulation.contexts:get:180 - Retrieved context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'cuda', 'cpu_cores': None, 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}, 'stage_name': '10_prod_npt', 'stages': [{'stage_name': '08_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/../../04-relax/run-03/outputs/07_relax_npt.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 50000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '09_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '10_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': '$SLURM_SUBMIT_DIR/inputs/10_prod_npt.in', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': '$SLURM_SUBMIT_DIR/outputs/10_prod_npt.out', 'coord_path': '$SLURM_SUBMIT_DIR/outputs/10_prod_npt.nc', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'restart_path': '$SLURM_SUBMIT_DIR/outputs/10_prod_npt.rst', 'prev_coordinate_path': None, 'prev_restart_path': '$SLURM_SUBMIT_DIR/outputs/09_prod_npt.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'splits': 1, 'sbatch_options': {'nodes': 1, 'ntasks-per-node': 2, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '6-00:00:00', 'cluster': 'gpu', 'partition': 'a100', 'gres': 'gpu:1', 'account': 'jdurrant', 'job-name': 'metalflare/003/05-prod/run-03'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'cp ../../02-prep/mol.inpcrd ./inputs', 'cp ../../02-prep/mol.prmtop ./inputs', '', 'mkdir -p outputs/', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/05-prod/run-03/run.sh', 'slurm_path': '../simulations/05-prod/run-03/submit.slurm', 'write': True, 'write_dir': '../simulations/05-prod/run-03/inputs', 'submit': False, 'work_dir': None, 'yaml_path': '/tmp/tmp.glB2U3R5OZ', 'add_lines_tleap': ['addAtomTypes { {"cc" "C" "sp2"} {"cd" "C" "sp2"} {"cf" "C" "sp2"} ', '{"c" "C" "sp2"} {"nd" "N" "sp2"} {"nc" "N" "sp2"} {"ne" "N" "sp2"}', '{"nf" "N" "sp2"} {"ha" "H" "sp3"} {"oh" "O" "sp3"} }', 'xFPparams = loadamberparams ../../../methods/03-tleap/cro/frcmod.xFPchromophores.2022', 'loadOff ../../../methods/03-tleap/cro/xFPchromophores.lib.2022'], 'run_dir': '$SLURM_SUBMIT_DIR/outputs', 'mdinfo_path': '$SLURM_SUBMIT_DIR/outputs/10_prod_npt.mdinfo', 'prev_coord_path': '$SLURM_SUBMIT_DIR/outputs/09_prod_npt.nc'}
2024-05-28 11:42:13.170-04:00 | DEBUG    | metalflare.simulation.contexts:validate:221 - Checking ff_protein
2024-05-28 11:42:13.170-04:00 | DEBUG    | metalflare.simulation.contexts:validate:228 -   Valid: ff19SB
2024-05-28 11:42:13.171-04:00 | DEBUG    | metalflare.simulation.contexts:validate:221 - Checking ff_water
2024-05-28 11:42:13.171-04:00 | DEBUG    | metalflare.simulation.contexts:validate:228 -   Valid: opc3
2024-05-28 11:42:13.172-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check ff_dna
2024-05-28 11:42:13.172-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check ff_rna
2024-05-28 11:42:13.172-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check ff_glycam
2024-05-28 11:42:13.172-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check ff_lipid
2024-05-28 11:42:13.172-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check ff_small_molecule
2024-05-28 11:42:13.172-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check ff_ions
2024-05-28 11:42:13.173-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check cation_identity
2024-05-28 11:42:13.173-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check anion_identity
2024-05-28 11:42:13.173-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check system_charge
2024-05-28 11:42:13.173-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check neutralize_charge
2024-05-28 11:42:13.174-04:00 | DEBUG    | metalflare.simulation.contexts:validate:221 - Checking extra_cations
2024-05-28 11:42:13.174-04:00 | DEBUG    | metalflare.simulation.contexts:validate:235 -   Valid: 0
2024-05-28 11:42:13.174-04:00 | DEBUG    | metalflare.simulation.contexts:validate:221 - Checking extra_anions
2024-05-28 11:42:13.175-04:00 | DEBUG    | metalflare.simulation.contexts:validate:235 -   Valid: 0
2024-05-28 11:42:13.175-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check solvent_ionic_strength
2024-05-28 11:42:13.175-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check solvent_padding
2024-05-28 11:42:13.175-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check verbosity
2024-05-28 11:42:13.175-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check scratch_dir
2024-05-28 11:42:13.176-04:00 | DEBUG    | metalflare.simulation.contexts:validate:221 - Checking compute_platform
2024-05-28 11:42:13.176-04:00 | DEBUG    | metalflare.simulation.contexts:validate:228 -   Valid: cuda
2024-05-28 11:42:13.176-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check cpu_cores
2024-05-28 11:42:13.176-04:00 | DEBUG    | metalflare.simulation.contexts:validate:221 - Checking input_kwargs
2024-05-28 11:42:13.176-04:00 | DEBUG    | metalflare.simulation.contexts:validate:235 -   Valid: {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}
2024-05-28 11:42:13.177-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check stage_name
2024-05-28 11:42:13.177-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check stages
2024-05-28 11:42:13.177-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check input_dir
2024-05-28 11:42:13.178-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check input_path
2024-05-28 11:42:13.178-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check output_dir
2024-05-28 11:42:13.178-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check output_path
2024-05-28 11:42:13.178-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check coord_path
2024-05-28 11:42:13.179-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check topo_path
2024-05-28 11:42:13.179-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check restart_path
2024-05-28 11:42:13.179-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check prev_coordinate_path
2024-05-28 11:42:13.179-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check prev_restart_path
2024-05-28 11:42:13.179-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check ref_coord_path
2024-05-28 11:42:13.180-04:00 | DEBUG    | metalflare.simulation.contexts:validate:221 - Checking splits
2024-05-28 11:42:13.180-04:00 | DEBUG    | metalflare.simulation.contexts:validate:235 -   Valid: 1
2024-05-28 11:42:13.180-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check sbatch_options
2024-05-28 11:42:13.180-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check slurm_lines
2024-05-28 11:42:13.180-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check run_path
2024-05-28 11:42:13.181-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check slurm_path
2024-05-28 11:42:13.181-04:00 | DEBUG    | metalflare.simulation.contexts:validate:221 - Checking write
2024-05-28 11:42:13.181-04:00 | DEBUG    | metalflare.simulation.contexts:validate:235 -   Valid: True
2024-05-28 11:42:13.181-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check write_dir
2024-05-28 11:42:13.181-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check submit
2024-05-28 11:42:13.182-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check work_dir
2024-05-28 11:42:13.182-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check yaml_path
2024-05-28 11:42:13.182-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check add_lines_tleap
2024-05-28 11:42:13.182-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check run_dir
2024-05-28 11:42:13.182-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check mdinfo_path
2024-05-28 11:42:13.183-04:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Cannot check prev_coord_path
2024-05-28 11:42:13.183-04:00 | DEBUG    | metalflare.simulation.contexts:get:180 - Retrieved context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'cuda', 'cpu_cores': None, 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}, 'stage_name': '10_prod_npt', 'stages': [{'stage_name': '08_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/../../04-relax/run-03/outputs/07_relax_npt.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 50000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '09_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '10_prod_npt', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'input_kwargs': {'irest': 1, 'ntx': 5, 'ig': -1, 'dt': 0.002, 'nstlim': 100000000, 'nscm': 500, 'ntr': 0, 'ntb': 2, 'ntf': 2, 'ntc': 2, 'cut': 10.0, 'ntt': 3, 'temp0': 300.0, 'gamma_ln': 5.0, 'ntp': 1, 'barostat': 2, 'pres0': 1.01325, 'mcbarint': 100, 'comp': 44.6, 'taup': 1.0, 'ntxo': 2, 'ntwr': 5000, 'ntpr': 500, 'ntwx': 5000, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': '$SLURM_SUBMIT_DIR/inputs/10_prod_npt.in', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': '$SLURM_SUBMIT_DIR/outputs/10_prod_npt.out', 'coord_path': '$SLURM_SUBMIT_DIR/outputs/10_prod_npt.nc', 'topo_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.prmtop', 'restart_path': '$SLURM_SUBMIT_DIR/outputs/10_prod_npt.rst', 'prev_coordinate_path': None, 'prev_restart_path': '$SLURM_SUBMIT_DIR/outputs/09_prod_npt.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/../../02-prep/mol.inpcrd', 'splits': 1, 'sbatch_options': {'nodes': 1, 'ntasks-per-node': 2, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '6-00:00:00', 'cluster': 'gpu', 'partition': 'a100', 'gres': 'gpu:1', 'account': 'jdurrant', 'job-name': 'metalflare/003/05-prod/run-03'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'cp ../../02-prep/mol.inpcrd ./inputs', 'cp ../../02-prep/mol.prmtop ./inputs', '', 'mkdir -p outputs/', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/05-prod/run-03/run.sh', 'slurm_path': '../simulations/05-prod/run-03/submit.slurm', 'write': True, 'write_dir': '../simulations/05-prod/run-03/inputs', 'submit': False, 'work_dir': None, 'yaml_path': '/tmp/tmp.glB2U3R5OZ', 'add_lines_tleap': ['addAtomTypes { {"cc" "C" "sp2"} {"cd" "C" "sp2"} {"cf" "C" "sp2"} ', '{"c" "C" "sp2"} {"nd" "N" "sp2"} {"nc" "N" "sp2"} {"ne" "N" "sp2"}', '{"nf" "N" "sp2"} {"ha" "H" "sp3"} {"oh" "O" "sp3"} }', 'xFPparams = loadamberparams ../../../methods/03-tleap/cro/frcmod.xFPchromophores.2022', 'loadOff ../../../methods/03-tleap/cro/xFPchromophores.lib.2022'], 'run_dir': '$SLURM_SUBMIT_DIR/outputs', 'mdinfo_path': '$SLURM_SUBMIT_DIR/outputs/10_prod_npt.mdinfo', 'prev_coord_path': '$SLURM_SUBMIT_DIR/outputs/09_prod_npt.nc'}
2024-05-28 11:42:13.183-04:00 | INFO     | metalflare.simulation.amber.run:get_stage_input_lines:153 - Preparing input lines for stage 10_prod_npt
2024-05-28 11:42:13.183-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: irest=1,
2024-05-28 11:42:13.184-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntx=5,
2024-05-28 11:42:13.184-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ig=-1,
2024-05-28 11:42:13.184-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: dt=0.002,
2024-05-28 11:42:13.184-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: nstlim=100000000,
2024-05-28 11:42:13.184-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: nscm=500,
2024-05-28 11:42:13.184-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntr=0,
2024-05-28 11:42:13.185-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntb=2,
2024-05-28 11:42:13.185-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntf=2,
2024-05-28 11:42:13.185-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntc=2,
2024-05-28 11:42:13.186-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: cut=10.0,
2024-05-28 11:42:13.186-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntt=3,
2024-05-28 11:42:13.186-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: temp0=300.0,
2024-05-28 11:42:13.186-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: gamma_ln=5.0,
2024-05-28 11:42:13.186-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntp=1,
2024-05-28 11:42:13.187-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: barostat=2,
2024-05-28 11:42:13.187-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: pres0=1.01325,
2024-05-28 11:42:13.187-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: mcbarint=100,
2024-05-28 11:42:13.187-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: comp=44.6,
2024-05-28 11:42:13.187-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: taup=1.0,
2024-05-28 11:42:13.188-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntxo=2,
2024-05-28 11:42:13.188-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntwr=5000,
2024-05-28 11:42:13.188-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntpr=500,
2024-05-28 11:42:13.188-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ntwx=5000,
2024-05-28 11:42:13.188-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: ioutfm=1,
2024-05-28 11:42:13.188-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:159 - Adding input line: iwrap=1,
2024-05-28 11:42:13.189-04:00 | INFO     | metalflare.simulation.amber.run:prepare_stage:212 - Writing input file at ../simulations/05-prod/run-03/inputs/10_prod_npt.in
2024-05-28 11:42:13.190-04:00 | INFO     | metalflare.simulation.amber.run:prepare_stage:221 - Adding stage's amber command to run script
2024-05-28 11:42:13.190-04:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_run_command:124 - Amber command: %s
2024-05-28 11:42:13.190-04:00 | DEBUG    | metalflare.simulation.amber.run:prepare:257 - Writing run script at ../simulations/05-prod/run-03/run.sh
