2023-12-03 22:21:25.725-05:00 | DEBUG    | metalflare.simulation.contexts:update:164 - Updating context:
{}
2023-12-03 22:21:25.725-05:00 | INFO     | metalflare.simulation.contexts:from_yaml:149 - Loading YAML context from ../simulations/base.yml
2023-12-03 22:21:25.726-05:00 | DEBUG    | metalflare.simulation.contexts:from_yaml:153 - YAML data:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0}
2023-12-03 22:21:25.726-05:00 | DEBUG    | metalflare.simulation.contexts:update:164 - Updating context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0}
2023-12-03 22:21:25.726-05:00 | INFO     | metalflare.simulation.contexts:from_yaml:149 - Loading YAML context from ../simulations/03-min.yml
2023-12-03 22:21:25.729-05:00 | DEBUG    | metalflare.simulation.contexts:from_yaml:153 - YAML data:
{'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'compute_platform': 'mpi', 'sbatch_options': {'nodes': 2, 'ntasks-per-node': 48, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '1-00:00:00', 'cluster': 'mpi', 'partition': 'mpi', 'account': 'jdurrant'}, 'stages': [{'stage_name': '01_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(@H=)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '02_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(:WAT) & !(@H=) & !(:Na+,Cl-)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '03_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 2.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '04_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 1.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}]}
2023-12-03 22:21:25.729-05:00 | DEBUG    | metalflare.simulation.contexts:update:164 - Updating context:
{'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'compute_platform': 'mpi', 'sbatch_options': {'nodes': 2, 'ntasks-per-node': 48, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '1-00:00:00', 'cluster': 'mpi', 'partition': 'mpi', 'account': 'jdurrant'}, 'stages': [{'stage_name': '01_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(@H=)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '02_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(:WAT) & !(@H=) & !(:Na+,Cl-)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '03_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 2.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '04_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 1.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}]}
2023-12-03 22:21:25.729-05:00 | INFO     | metalflare.simulation.contexts:from_yaml:149 - Loading YAML context from ../simulations/slurm.yml
2023-12-03 22:21:25.730-05:00 | DEBUG    | metalflare.simulation.contexts:from_yaml:153 - YAML data:
{'write': True, 'submit': False, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'chmod +x ./run.sh', './run.sh', '', 'touch CALC_DONE']}
2023-12-03 22:21:25.730-05:00 | DEBUG    | metalflare.simulation.contexts:update:164 - Updating context:
{'write': True, 'submit': False, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'chmod +x ./run.sh', './run.sh', '', 'touch CALC_DONE']}
2023-12-03 22:21:25.730-05:00 | DEBUG    | metalflare.simulation.contexts:get:178 - Retrieved context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'mpi', 'cpu_cores': None, 'input_kwargs': None, 'stage_name': None, 'stages': [{'stage_name': '01_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(@H=)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '02_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(:WAT) & !(@H=) & !(:Na+,Cl-)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '03_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 2.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '04_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 1.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': None, 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': None, 'coord_path': None, 'topo_path': None, 'restart_path': None, 'prev_coordinate_path': None, 'prev_restart_path': None, 'ref_coord_path': None, 'splits': 1, 'sbatch_options': {'nodes': 2, 'ntasks-per-node': 48, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '1-00:00:00', 'cluster': 'mpi', 'partition': 'mpi', 'account': 'jdurrant', 'job-name': 'metalflare/001/03-min'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'chmod +x ./run.sh', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/03-min/run.sh', 'slurm_path': '../simulations/03-min/submit.slurm', 'write': True, 'write_dir': '../simulations/03-min/inputs', 'submit': False, 'yaml_path': '../simulations/slurm.yml'}
2023-12-03 22:21:25.730-05:00 | INFO     | metalflare.simulation.run:prepare_slurm_lines:63 - Preparing slurm submission script
2023-12-03 22:21:25.730-05:00 | DEBUG    | metalflare.simulation.run:prepare_slurm_lines:70 - Slurm script:
#!/bin/bash
#SBATCH --nodes=2
#SBATCH --ntasks-per-node=48
#SBATCH --output=slurm-%j.out
#SBATCH --error=slurm-%j.err
#SBATCH --time=1-00:00:00
#SBATCH --cluster=mpi
#SBATCH --partition=mpi
#SBATCH --account=jdurrant
#SBATCH --job-name=metalflare/001/03-min

# Load environment
module purge
module load gcc/8.2.0
module load openmpi/4.0.3
module load amber/22

chmod +x ./run.sh
./run.sh

touch CALC_DONE

2023-12-03 22:21:25.730-05:00 | INFO     | metalflare.simulation.run:prepare_slurm_lines:72 - Writing submissions script at ../simulations/03-min/submit.slurm
2023-12-03 22:21:25.731-05:00 | INFO     | metalflare.simulation.amber.run:prepare:231 - Prepare simulations
2023-12-03 22:21:25.731-05:00 | DEBUG    | metalflare.simulation.amber.run:prepare:234 - There are multiple stages
2023-12-03 22:21:25.731-05:00 | DEBUG    | metalflare.simulation.contexts:update:164 - Updating context:
{'stage_name': '01_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(@H=)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}
2023-12-03 22:21:25.731-05:00 | INFO     | metalflare.simulation.amber.run:prepare:243 - Preparing stage 0
2023-12-03 22:21:25.731-05:00 | INFO     | metalflare.simulation.amber.run:prepare_context:25 - Preparing context for Amber simulation
2023-12-03 22:21:25.731-05:00 | DEBUG    | metalflare.simulation.contexts:get:178 - Retrieved context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'mpi', 'cpu_cores': None, 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(@H=)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}, 'stage_name': '01_min', 'stages': [{'stage_name': '01_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(@H=)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '02_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(:WAT) & !(@H=) & !(:Na+,Cl-)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '03_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 2.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '04_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 1.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': None, 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': None, 'coord_path': None, 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'restart_path': None, 'prev_coordinate_path': None, 'prev_restart_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'splits': 1, 'sbatch_options': {'nodes': 2, 'ntasks-per-node': 48, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '1-00:00:00', 'cluster': 'mpi', 'partition': 'mpi', 'account': 'jdurrant', 'job-name': 'metalflare/001/03-min'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'chmod +x ./run.sh', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/03-min/run.sh', 'slurm_path': '../simulations/03-min/submit.slurm', 'write': True, 'write_dir': '../simulations/03-min/inputs', 'submit': False, 'yaml_path': '../simulations/slurm.yml'}
2023-12-03 22:21:25.731-05:00 | DEBUG    | metalflare.simulation.contexts:update:164 - Updating context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'mpi', 'cpu_cores': 96, 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(@H=)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}, 'stage_name': '01_min', 'stages': [{'stage_name': '01_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(@H=)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '02_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(:WAT) & !(@H=) & !(:Na+,Cl-)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '03_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 2.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '04_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 1.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': '$SLURM_SUBMIT_DIR/inputs/01_min.in', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': '$SLURM_SUBMIT_DIR/outputs/01_min.out', 'coord_path': '$SLURM_SUBMIT_DIR/outputs/01_min.nc', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'restart_path': '$SLURM_SUBMIT_DIR/outputs/01_min.rst', 'prev_coordinate_path': None, 'prev_restart_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'splits': 1, 'sbatch_options': {'nodes': 2, 'ntasks-per-node': 48, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '1-00:00:00', 'cluster': 'mpi', 'partition': 'mpi', 'account': 'jdurrant', 'job-name': 'metalflare/001/03-min'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'chmod +x ./run.sh', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/03-min/run.sh', 'slurm_path': '../simulations/03-min/submit.slurm', 'write': True, 'write_dir': '../simulations/03-min/inputs', 'submit': False, 'yaml_path': '../simulations/slurm.yml', 'run_dir': '$SLURM_SUBMIT_DIR/outputs', 'mdinfo_path': '$SLURM_SUBMIT_DIR/outputs/01_min.mdinfo'}
2023-12-03 22:21:25.731-05:00 | INFO     | metalflare.simulation.contexts:validate:210 - Validating with: AmberContextValidator
2023-12-03 22:21:25.731-05:00 | DEBUG    | metalflare.simulation.contexts:get:178 - Retrieved context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'mpi', 'cpu_cores': 96, 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(@H=)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}, 'stage_name': '01_min', 'stages': [{'stage_name': '01_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(@H=)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '02_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(:WAT) & !(@H=) & !(:Na+,Cl-)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '03_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 2.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '04_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 1.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': '$SLURM_SUBMIT_DIR/inputs/01_min.in', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': '$SLURM_SUBMIT_DIR/outputs/01_min.out', 'coord_path': '$SLURM_SUBMIT_DIR/outputs/01_min.nc', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'restart_path': '$SLURM_SUBMIT_DIR/outputs/01_min.rst', 'prev_coordinate_path': None, 'prev_restart_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'splits': 1, 'sbatch_options': {'nodes': 2, 'ntasks-per-node': 48, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '1-00:00:00', 'cluster': 'mpi', 'partition': 'mpi', 'account': 'jdurrant', 'job-name': 'metalflare/001/03-min'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'chmod +x ./run.sh', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/03-min/run.sh', 'slurm_path': '../simulations/03-min/submit.slurm', 'write': True, 'write_dir': '../simulations/03-min/inputs', 'submit': False, 'yaml_path': '../simulations/slurm.yml', 'run_dir': '$SLURM_SUBMIT_DIR/outputs', 'mdinfo_path': '$SLURM_SUBMIT_DIR/outputs/01_min.mdinfo'}
2023-12-03 22:21:25.732-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking ff_protein
2023-12-03 22:21:25.732-05:00 | DEBUG    | metalflare.simulation.contexts:validate:226 -   Valid: ff19SB
2023-12-03 22:21:25.732-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking ff_water
2023-12-03 22:21:25.732-05:00 | DEBUG    | metalflare.simulation.contexts:validate:226 -   Valid: opc3
2023-12-03 22:21:25.732-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check ff_dna
2023-12-03 22:21:25.732-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check ff_rna
2023-12-03 22:21:25.732-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check ff_glycam
2023-12-03 22:21:25.732-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check ff_lipid
2023-12-03 22:21:25.732-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check ff_small_molecule
2023-12-03 22:21:25.732-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check ff_ions
2023-12-03 22:21:25.733-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check cation_identity
2023-12-03 22:21:25.733-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check anion_identity
2023-12-03 22:21:25.733-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check system_charge
2023-12-03 22:21:25.733-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check neutralize_charge
2023-12-03 22:21:25.733-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking extra_cations
2023-12-03 22:21:25.733-05:00 | DEBUG    | metalflare.simulation.contexts:validate:233 -   Valid: 0
2023-12-03 22:21:25.733-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking extra_anions
2023-12-03 22:21:25.733-05:00 | DEBUG    | metalflare.simulation.contexts:validate:233 -   Valid: 0
2023-12-03 22:21:25.733-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check solvent_ionic_strength
2023-12-03 22:21:25.733-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check solvent_padding
2023-12-03 22:21:25.733-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check verbosity
2023-12-03 22:21:25.734-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check scratch_dir
2023-12-03 22:21:25.734-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking compute_platform
2023-12-03 22:21:25.734-05:00 | DEBUG    | metalflare.simulation.contexts:validate:226 -   Valid: mpi
2023-12-03 22:21:25.734-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check cpu_cores
2023-12-03 22:21:25.734-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking input_kwargs
2023-12-03 22:21:25.734-05:00 | DEBUG    | metalflare.simulation.contexts:validate:233 -   Valid: {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(@H=)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}
2023-12-03 22:21:25.734-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check stage_name
2023-12-03 22:21:25.734-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check stages
2023-12-03 22:21:25.734-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check input_dir
2023-12-03 22:21:25.734-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check input_path
2023-12-03 22:21:25.734-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check output_dir
2023-12-03 22:21:25.735-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check output_path
2023-12-03 22:21:25.735-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check coord_path
2023-12-03 22:21:25.735-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check topo_path
2023-12-03 22:21:25.735-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check restart_path
2023-12-03 22:21:25.735-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check prev_coordinate_path
2023-12-03 22:21:25.735-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check prev_restart_path
2023-12-03 22:21:25.735-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check ref_coord_path
2023-12-03 22:21:25.735-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking splits
2023-12-03 22:21:25.735-05:00 | DEBUG    | metalflare.simulation.contexts:validate:233 -   Valid: 1
2023-12-03 22:21:25.735-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check sbatch_options
2023-12-03 22:21:25.735-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check slurm_lines
2023-12-03 22:21:25.736-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check run_path
2023-12-03 22:21:25.736-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check slurm_path
2023-12-03 22:21:25.736-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking write
2023-12-03 22:21:25.736-05:00 | DEBUG    | metalflare.simulation.contexts:validate:233 -   Valid: True
2023-12-03 22:21:25.736-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check write_dir
2023-12-03 22:21:25.736-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check submit
2023-12-03 22:21:25.736-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check yaml_path
2023-12-03 22:21:25.736-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check run_dir
2023-12-03 22:21:25.736-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check mdinfo_path
2023-12-03 22:21:25.736-05:00 | DEBUG    | metalflare.simulation.contexts:get:178 - Retrieved context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'mpi', 'cpu_cores': 96, 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(@H=)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}, 'stage_name': '01_min', 'stages': [{'stage_name': '01_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(@H=)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '02_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(:WAT) & !(@H=) & !(:Na+,Cl-)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '03_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 2.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '04_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 1.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': '$SLURM_SUBMIT_DIR/inputs/01_min.in', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': '$SLURM_SUBMIT_DIR/outputs/01_min.out', 'coord_path': '$SLURM_SUBMIT_DIR/outputs/01_min.nc', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'restart_path': '$SLURM_SUBMIT_DIR/outputs/01_min.rst', 'prev_coordinate_path': None, 'prev_restart_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'splits': 1, 'sbatch_options': {'nodes': 2, 'ntasks-per-node': 48, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '1-00:00:00', 'cluster': 'mpi', 'partition': 'mpi', 'account': 'jdurrant', 'job-name': 'metalflare/001/03-min'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'chmod +x ./run.sh', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/03-min/run.sh', 'slurm_path': '../simulations/03-min/submit.slurm', 'write': True, 'write_dir': '../simulations/03-min/inputs', 'submit': False, 'yaml_path': '../simulations/slurm.yml', 'run_dir': '$SLURM_SUBMIT_DIR/outputs', 'mdinfo_path': '$SLURM_SUBMIT_DIR/outputs/01_min.mdinfo'}
2023-12-03 22:21:25.737-05:00 | INFO     | metalflare.simulation.amber.run:get_stage_input_lines:151 - Preparing input lines for stage 01_min
2023-12-03 22:21:25.737-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: imin=1,
2023-12-03 22:21:25.737-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntx=1,
2023-12-03 22:21:25.737-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: irest=0,
2023-12-03 22:21:25.737-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntmin=1,
2023-12-03 22:21:25.737-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: maxcyc=5000,
2023-12-03 22:21:25.737-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ncyc=1000,
2023-12-03 22:21:25.737-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntr=1,
2023-12-03 22:21:25.737-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: restraint_wt=5.0,
2023-12-03 22:21:25.737-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: restraintmask="!(@H=)",
2023-12-03 22:21:25.738-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntb=1,
2023-12-03 22:21:25.738-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntf=1,
2023-12-03 22:21:25.738-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntc=1,
2023-12-03 22:21:25.738-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: cut=10.0,
2023-12-03 22:21:25.738-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntxo=2,
2023-12-03 22:21:25.738-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntwr=200,
2023-12-03 22:21:25.738-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntpr=1,
2023-12-03 22:21:25.738-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntwx=200,
2023-12-03 22:21:25.738-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ioutfm=1,
2023-12-03 22:21:25.738-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: iwrap=1,
2023-12-03 22:21:25.738-05:00 | INFO     | metalflare.simulation.amber.run:prepare_stage:210 - Writing input file at ../simulations/03-min/inputs/01_min.in
2023-12-03 22:21:25.739-05:00 | INFO     | metalflare.simulation.amber.run:prepare_stage:219 - Adding stage's amber command to run script
2023-12-03 22:21:25.739-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_run_command:122 - Amber command: %s
2023-12-03 22:21:25.739-05:00 | DEBUG    | metalflare.simulation.contexts:update:164 - Updating context:
{'stage_name': '02_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(:WAT) & !(@H=) & !(:Na+,Cl-)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}
2023-12-03 22:21:25.739-05:00 | INFO     | metalflare.simulation.amber.run:prepare:243 - Preparing stage 1
2023-12-03 22:21:25.739-05:00 | INFO     | metalflare.simulation.amber.run:prepare_context:25 - Preparing context for Amber simulation
2023-12-03 22:21:25.739-05:00 | DEBUG    | metalflare.simulation.contexts:get:178 - Retrieved context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'mpi', 'cpu_cores': 96, 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(:WAT) & !(@H=) & !(:Na+,Cl-)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}, 'stage_name': '02_min', 'stages': [{'stage_name': '01_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(@H=)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '02_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(:WAT) & !(@H=) & !(:Na+,Cl-)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '03_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 2.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '04_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 1.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': '$SLURM_SUBMIT_DIR/inputs/01_min.in', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': '$SLURM_SUBMIT_DIR/outputs/01_min.out', 'coord_path': '$SLURM_SUBMIT_DIR/outputs/01_min.nc', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'restart_path': '$SLURM_SUBMIT_DIR/outputs/01_min.rst', 'prev_coordinate_path': None, 'prev_restart_path': '$SLURM_SUBMIT_DIR/outputs/01_min.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'splits': 1, 'sbatch_options': {'nodes': 2, 'ntasks-per-node': 48, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '1-00:00:00', 'cluster': 'mpi', 'partition': 'mpi', 'account': 'jdurrant', 'job-name': 'metalflare/001/03-min'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'chmod +x ./run.sh', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/03-min/run.sh', 'slurm_path': '../simulations/03-min/submit.slurm', 'write': True, 'write_dir': '../simulations/03-min/inputs', 'submit': False, 'yaml_path': '../simulations/slurm.yml', 'run_dir': '$SLURM_SUBMIT_DIR/outputs', 'mdinfo_path': '$SLURM_SUBMIT_DIR/outputs/01_min.mdinfo', 'prev_coord_path': '$SLURM_SUBMIT_DIR/outputs/01_min.nc'}
2023-12-03 22:21:25.739-05:00 | DEBUG    | metalflare.simulation.contexts:update:164 - Updating context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'mpi', 'cpu_cores': 96, 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(:WAT) & !(@H=) & !(:Na+,Cl-)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}, 'stage_name': '02_min', 'stages': [{'stage_name': '01_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(@H=)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '02_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(:WAT) & !(@H=) & !(:Na+,Cl-)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '03_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 2.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '04_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 1.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': '$SLURM_SUBMIT_DIR/inputs/02_min.in', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': '$SLURM_SUBMIT_DIR/outputs/02_min.out', 'coord_path': '$SLURM_SUBMIT_DIR/outputs/02_min.nc', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'restart_path': '$SLURM_SUBMIT_DIR/outputs/02_min.rst', 'prev_coordinate_path': None, 'prev_restart_path': '$SLURM_SUBMIT_DIR/outputs/01_min.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'splits': 1, 'sbatch_options': {'nodes': 2, 'ntasks-per-node': 48, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '1-00:00:00', 'cluster': 'mpi', 'partition': 'mpi', 'account': 'jdurrant', 'job-name': 'metalflare/001/03-min'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'chmod +x ./run.sh', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/03-min/run.sh', 'slurm_path': '../simulations/03-min/submit.slurm', 'write': True, 'write_dir': '../simulations/03-min/inputs', 'submit': False, 'yaml_path': '../simulations/slurm.yml', 'run_dir': '$SLURM_SUBMIT_DIR/outputs', 'mdinfo_path': '$SLURM_SUBMIT_DIR/outputs/02_min.mdinfo', 'prev_coord_path': '$SLURM_SUBMIT_DIR/outputs/01_min.nc'}
2023-12-03 22:21:25.739-05:00 | INFO     | metalflare.simulation.contexts:validate:210 - Validating with: AmberContextValidator
2023-12-03 22:21:25.740-05:00 | DEBUG    | metalflare.simulation.contexts:get:178 - Retrieved context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'mpi', 'cpu_cores': 96, 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(:WAT) & !(@H=) & !(:Na+,Cl-)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}, 'stage_name': '02_min', 'stages': [{'stage_name': '01_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(@H=)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '02_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(:WAT) & !(@H=) & !(:Na+,Cl-)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '03_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 2.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '04_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 1.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': '$SLURM_SUBMIT_DIR/inputs/02_min.in', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': '$SLURM_SUBMIT_DIR/outputs/02_min.out', 'coord_path': '$SLURM_SUBMIT_DIR/outputs/02_min.nc', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'restart_path': '$SLURM_SUBMIT_DIR/outputs/02_min.rst', 'prev_coordinate_path': None, 'prev_restart_path': '$SLURM_SUBMIT_DIR/outputs/01_min.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'splits': 1, 'sbatch_options': {'nodes': 2, 'ntasks-per-node': 48, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '1-00:00:00', 'cluster': 'mpi', 'partition': 'mpi', 'account': 'jdurrant', 'job-name': 'metalflare/001/03-min'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'chmod +x ./run.sh', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/03-min/run.sh', 'slurm_path': '../simulations/03-min/submit.slurm', 'write': True, 'write_dir': '../simulations/03-min/inputs', 'submit': False, 'yaml_path': '../simulations/slurm.yml', 'run_dir': '$SLURM_SUBMIT_DIR/outputs', 'mdinfo_path': '$SLURM_SUBMIT_DIR/outputs/02_min.mdinfo', 'prev_coord_path': '$SLURM_SUBMIT_DIR/outputs/01_min.nc'}
2023-12-03 22:21:25.740-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking ff_protein
2023-12-03 22:21:25.740-05:00 | DEBUG    | metalflare.simulation.contexts:validate:226 -   Valid: ff19SB
2023-12-03 22:21:25.740-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking ff_water
2023-12-03 22:21:25.740-05:00 | DEBUG    | metalflare.simulation.contexts:validate:226 -   Valid: opc3
2023-12-03 22:21:25.740-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check ff_dna
2023-12-03 22:21:25.740-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check ff_rna
2023-12-03 22:21:25.740-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check ff_glycam
2023-12-03 22:21:25.740-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check ff_lipid
2023-12-03 22:21:25.740-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check ff_small_molecule
2023-12-03 22:21:25.741-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check ff_ions
2023-12-03 22:21:25.741-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check cation_identity
2023-12-03 22:21:25.741-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check anion_identity
2023-12-03 22:21:25.741-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check system_charge
2023-12-03 22:21:25.741-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check neutralize_charge
2023-12-03 22:21:25.741-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking extra_cations
2023-12-03 22:21:25.741-05:00 | DEBUG    | metalflare.simulation.contexts:validate:233 -   Valid: 0
2023-12-03 22:21:25.741-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking extra_anions
2023-12-03 22:21:25.741-05:00 | DEBUG    | metalflare.simulation.contexts:validate:233 -   Valid: 0
2023-12-03 22:21:25.741-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check solvent_ionic_strength
2023-12-03 22:21:25.742-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check solvent_padding
2023-12-03 22:21:25.742-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check verbosity
2023-12-03 22:21:25.742-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check scratch_dir
2023-12-03 22:21:25.742-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking compute_platform
2023-12-03 22:21:25.742-05:00 | DEBUG    | metalflare.simulation.contexts:validate:226 -   Valid: mpi
2023-12-03 22:21:25.742-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check cpu_cores
2023-12-03 22:21:25.742-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking input_kwargs
2023-12-03 22:21:25.742-05:00 | DEBUG    | metalflare.simulation.contexts:validate:233 -   Valid: {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(:WAT) & !(@H=) & !(:Na+,Cl-)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}
2023-12-03 22:21:25.742-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check stage_name
2023-12-03 22:21:25.742-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check stages
2023-12-03 22:21:25.742-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check input_dir
2023-12-03 22:21:25.743-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check input_path
2023-12-03 22:21:25.743-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check output_dir
2023-12-03 22:21:25.743-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check output_path
2023-12-03 22:21:25.743-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check coord_path
2023-12-03 22:21:25.743-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check topo_path
2023-12-03 22:21:25.743-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check restart_path
2023-12-03 22:21:25.743-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check prev_coordinate_path
2023-12-03 22:21:25.743-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check prev_restart_path
2023-12-03 22:21:25.743-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check ref_coord_path
2023-12-03 22:21:25.743-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking splits
2023-12-03 22:21:25.743-05:00 | DEBUG    | metalflare.simulation.contexts:validate:233 -   Valid: 1
2023-12-03 22:21:25.744-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check sbatch_options
2023-12-03 22:21:25.744-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check slurm_lines
2023-12-03 22:21:25.744-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check run_path
2023-12-03 22:21:25.744-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check slurm_path
2023-12-03 22:21:25.744-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking write
2023-12-03 22:21:25.744-05:00 | DEBUG    | metalflare.simulation.contexts:validate:233 -   Valid: True
2023-12-03 22:21:25.744-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check write_dir
2023-12-03 22:21:25.744-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check submit
2023-12-03 22:21:25.744-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check yaml_path
2023-12-03 22:21:25.744-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check run_dir
2023-12-03 22:21:25.745-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check mdinfo_path
2023-12-03 22:21:25.745-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check prev_coord_path
2023-12-03 22:21:25.745-05:00 | DEBUG    | metalflare.simulation.contexts:get:178 - Retrieved context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'mpi', 'cpu_cores': 96, 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(:WAT) & !(@H=) & !(:Na+,Cl-)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}, 'stage_name': '02_min', 'stages': [{'stage_name': '01_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(@H=)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '02_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(:WAT) & !(@H=) & !(:Na+,Cl-)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '03_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 2.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '04_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 1.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': '$SLURM_SUBMIT_DIR/inputs/02_min.in', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': '$SLURM_SUBMIT_DIR/outputs/02_min.out', 'coord_path': '$SLURM_SUBMIT_DIR/outputs/02_min.nc', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'restart_path': '$SLURM_SUBMIT_DIR/outputs/02_min.rst', 'prev_coordinate_path': None, 'prev_restart_path': '$SLURM_SUBMIT_DIR/outputs/01_min.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'splits': 1, 'sbatch_options': {'nodes': 2, 'ntasks-per-node': 48, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '1-00:00:00', 'cluster': 'mpi', 'partition': 'mpi', 'account': 'jdurrant', 'job-name': 'metalflare/001/03-min'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'chmod +x ./run.sh', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/03-min/run.sh', 'slurm_path': '../simulations/03-min/submit.slurm', 'write': True, 'write_dir': '../simulations/03-min/inputs', 'submit': False, 'yaml_path': '../simulations/slurm.yml', 'run_dir': '$SLURM_SUBMIT_DIR/outputs', 'mdinfo_path': '$SLURM_SUBMIT_DIR/outputs/02_min.mdinfo', 'prev_coord_path': '$SLURM_SUBMIT_DIR/outputs/01_min.nc'}
2023-12-03 22:21:25.745-05:00 | INFO     | metalflare.simulation.amber.run:get_stage_input_lines:151 - Preparing input lines for stage 02_min
2023-12-03 22:21:25.745-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: imin=1,
2023-12-03 22:21:25.745-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntx=1,
2023-12-03 22:21:25.745-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: irest=0,
2023-12-03 22:21:25.745-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntmin=1,
2023-12-03 22:21:25.745-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: maxcyc=5000,
2023-12-03 22:21:25.745-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ncyc=1000,
2023-12-03 22:21:25.746-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntr=1,
2023-12-03 22:21:25.746-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: restraint_wt=5.0,
2023-12-03 22:21:25.746-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: restraintmask="!(:WAT) & !(@H=) & !(:Na+,Cl-)",
2023-12-03 22:21:25.746-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntb=1,
2023-12-03 22:21:25.746-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntf=1,
2023-12-03 22:21:25.746-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntc=1,
2023-12-03 22:21:25.746-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: cut=10.0,
2023-12-03 22:21:25.746-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntxo=2,
2023-12-03 22:21:25.746-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntwr=200,
2023-12-03 22:21:25.746-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntpr=1,
2023-12-03 22:21:25.746-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntwx=200,
2023-12-03 22:21:25.747-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ioutfm=1,
2023-12-03 22:21:25.747-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: iwrap=1,
2023-12-03 22:21:25.747-05:00 | INFO     | metalflare.simulation.amber.run:prepare_stage:210 - Writing input file at ../simulations/03-min/inputs/02_min.in
2023-12-03 22:21:25.747-05:00 | INFO     | metalflare.simulation.amber.run:prepare_stage:219 - Adding stage's amber command to run script
2023-12-03 22:21:25.747-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_run_command:122 - Amber command: %s
2023-12-03 22:21:25.747-05:00 | DEBUG    | metalflare.simulation.contexts:update:164 - Updating context:
{'stage_name': '03_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 2.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}
2023-12-03 22:21:25.747-05:00 | INFO     | metalflare.simulation.amber.run:prepare:243 - Preparing stage 2
2023-12-03 22:21:25.747-05:00 | INFO     | metalflare.simulation.amber.run:prepare_context:25 - Preparing context for Amber simulation
2023-12-03 22:21:25.748-05:00 | DEBUG    | metalflare.simulation.contexts:get:178 - Retrieved context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'mpi', 'cpu_cores': 96, 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 2.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}, 'stage_name': '03_min', 'stages': [{'stage_name': '01_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(@H=)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '02_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(:WAT) & !(@H=) & !(:Na+,Cl-)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '03_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 2.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '04_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 1.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': '$SLURM_SUBMIT_DIR/inputs/02_min.in', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': '$SLURM_SUBMIT_DIR/outputs/02_min.out', 'coord_path': '$SLURM_SUBMIT_DIR/outputs/02_min.nc', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'restart_path': '$SLURM_SUBMIT_DIR/outputs/02_min.rst', 'prev_coordinate_path': None, 'prev_restart_path': '$SLURM_SUBMIT_DIR/outputs/02_min.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'splits': 1, 'sbatch_options': {'nodes': 2, 'ntasks-per-node': 48, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '1-00:00:00', 'cluster': 'mpi', 'partition': 'mpi', 'account': 'jdurrant', 'job-name': 'metalflare/001/03-min'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'chmod +x ./run.sh', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/03-min/run.sh', 'slurm_path': '../simulations/03-min/submit.slurm', 'write': True, 'write_dir': '../simulations/03-min/inputs', 'submit': False, 'yaml_path': '../simulations/slurm.yml', 'run_dir': '$SLURM_SUBMIT_DIR/outputs', 'mdinfo_path': '$SLURM_SUBMIT_DIR/outputs/02_min.mdinfo', 'prev_coord_path': '$SLURM_SUBMIT_DIR/outputs/02_min.nc'}
2023-12-03 22:21:25.748-05:00 | DEBUG    | metalflare.simulation.contexts:update:164 - Updating context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'mpi', 'cpu_cores': 96, 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 2.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}, 'stage_name': '03_min', 'stages': [{'stage_name': '01_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(@H=)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '02_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(:WAT) & !(@H=) & !(:Na+,Cl-)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '03_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 2.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '04_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 1.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': '$SLURM_SUBMIT_DIR/inputs/03_min.in', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': '$SLURM_SUBMIT_DIR/outputs/03_min.out', 'coord_path': '$SLURM_SUBMIT_DIR/outputs/03_min.nc', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'restart_path': '$SLURM_SUBMIT_DIR/outputs/03_min.rst', 'prev_coordinate_path': None, 'prev_restart_path': '$SLURM_SUBMIT_DIR/outputs/02_min.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'splits': 1, 'sbatch_options': {'nodes': 2, 'ntasks-per-node': 48, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '1-00:00:00', 'cluster': 'mpi', 'partition': 'mpi', 'account': 'jdurrant', 'job-name': 'metalflare/001/03-min'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'chmod +x ./run.sh', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/03-min/run.sh', 'slurm_path': '../simulations/03-min/submit.slurm', 'write': True, 'write_dir': '../simulations/03-min/inputs', 'submit': False, 'yaml_path': '../simulations/slurm.yml', 'run_dir': '$SLURM_SUBMIT_DIR/outputs', 'mdinfo_path': '$SLURM_SUBMIT_DIR/outputs/03_min.mdinfo', 'prev_coord_path': '$SLURM_SUBMIT_DIR/outputs/02_min.nc'}
2023-12-03 22:21:25.748-05:00 | INFO     | metalflare.simulation.contexts:validate:210 - Validating with: AmberContextValidator
2023-12-03 22:21:25.748-05:00 | DEBUG    | metalflare.simulation.contexts:get:178 - Retrieved context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'mpi', 'cpu_cores': 96, 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 2.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}, 'stage_name': '03_min', 'stages': [{'stage_name': '01_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(@H=)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '02_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(:WAT) & !(@H=) & !(:Na+,Cl-)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '03_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 2.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '04_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 1.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': '$SLURM_SUBMIT_DIR/inputs/03_min.in', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': '$SLURM_SUBMIT_DIR/outputs/03_min.out', 'coord_path': '$SLURM_SUBMIT_DIR/outputs/03_min.nc', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'restart_path': '$SLURM_SUBMIT_DIR/outputs/03_min.rst', 'prev_coordinate_path': None, 'prev_restart_path': '$SLURM_SUBMIT_DIR/outputs/02_min.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'splits': 1, 'sbatch_options': {'nodes': 2, 'ntasks-per-node': 48, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '1-00:00:00', 'cluster': 'mpi', 'partition': 'mpi', 'account': 'jdurrant', 'job-name': 'metalflare/001/03-min'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'chmod +x ./run.sh', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/03-min/run.sh', 'slurm_path': '../simulations/03-min/submit.slurm', 'write': True, 'write_dir': '../simulations/03-min/inputs', 'submit': False, 'yaml_path': '../simulations/slurm.yml', 'run_dir': '$SLURM_SUBMIT_DIR/outputs', 'mdinfo_path': '$SLURM_SUBMIT_DIR/outputs/03_min.mdinfo', 'prev_coord_path': '$SLURM_SUBMIT_DIR/outputs/02_min.nc'}
2023-12-03 22:21:25.748-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking ff_protein
2023-12-03 22:21:25.748-05:00 | DEBUG    | metalflare.simulation.contexts:validate:226 -   Valid: ff19SB
2023-12-03 22:21:25.748-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking ff_water
2023-12-03 22:21:25.748-05:00 | DEBUG    | metalflare.simulation.contexts:validate:226 -   Valid: opc3
2023-12-03 22:21:25.748-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check ff_dna
2023-12-03 22:21:25.749-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check ff_rna
2023-12-03 22:21:25.749-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check ff_glycam
2023-12-03 22:21:25.749-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check ff_lipid
2023-12-03 22:21:25.749-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check ff_small_molecule
2023-12-03 22:21:25.749-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check ff_ions
2023-12-03 22:21:25.749-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check cation_identity
2023-12-03 22:21:25.749-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check anion_identity
2023-12-03 22:21:25.749-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check system_charge
2023-12-03 22:21:25.749-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check neutralize_charge
2023-12-03 22:21:25.749-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking extra_cations
2023-12-03 22:21:25.749-05:00 | DEBUG    | metalflare.simulation.contexts:validate:233 -   Valid: 0
2023-12-03 22:21:25.750-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking extra_anions
2023-12-03 22:21:25.750-05:00 | DEBUG    | metalflare.simulation.contexts:validate:233 -   Valid: 0
2023-12-03 22:21:25.750-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check solvent_ionic_strength
2023-12-03 22:21:25.750-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check solvent_padding
2023-12-03 22:21:25.750-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check verbosity
2023-12-03 22:21:25.750-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check scratch_dir
2023-12-03 22:21:25.750-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking compute_platform
2023-12-03 22:21:25.750-05:00 | DEBUG    | metalflare.simulation.contexts:validate:226 -   Valid: mpi
2023-12-03 22:21:25.750-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check cpu_cores
2023-12-03 22:21:25.750-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking input_kwargs
2023-12-03 22:21:25.750-05:00 | DEBUG    | metalflare.simulation.contexts:validate:233 -   Valid: {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 2.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}
2023-12-03 22:21:25.751-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check stage_name
2023-12-03 22:21:25.751-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check stages
2023-12-03 22:21:25.751-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check input_dir
2023-12-03 22:21:25.751-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check input_path
2023-12-03 22:21:25.751-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check output_dir
2023-12-03 22:21:25.751-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check output_path
2023-12-03 22:21:25.751-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check coord_path
2023-12-03 22:21:25.751-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check topo_path
2023-12-03 22:21:25.751-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check restart_path
2023-12-03 22:21:25.751-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check prev_coordinate_path
2023-12-03 22:21:25.751-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check prev_restart_path
2023-12-03 22:21:25.752-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check ref_coord_path
2023-12-03 22:21:25.752-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking splits
2023-12-03 22:21:25.752-05:00 | DEBUG    | metalflare.simulation.contexts:validate:233 -   Valid: 1
2023-12-03 22:21:25.752-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check sbatch_options
2023-12-03 22:21:25.752-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check slurm_lines
2023-12-03 22:21:25.752-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check run_path
2023-12-03 22:21:25.752-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check slurm_path
2023-12-03 22:21:25.752-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking write
2023-12-03 22:21:25.752-05:00 | DEBUG    | metalflare.simulation.contexts:validate:233 -   Valid: True
2023-12-03 22:21:25.752-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check write_dir
2023-12-03 22:21:25.753-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check submit
2023-12-03 22:21:25.753-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check yaml_path
2023-12-03 22:21:25.753-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check run_dir
2023-12-03 22:21:25.753-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check mdinfo_path
2023-12-03 22:21:25.753-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check prev_coord_path
2023-12-03 22:21:25.753-05:00 | DEBUG    | metalflare.simulation.contexts:get:178 - Retrieved context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'mpi', 'cpu_cores': 96, 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 2.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}, 'stage_name': '03_min', 'stages': [{'stage_name': '01_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(@H=)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '02_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(:WAT) & !(@H=) & !(:Na+,Cl-)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '03_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 2.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '04_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 1.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': '$SLURM_SUBMIT_DIR/inputs/03_min.in', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': '$SLURM_SUBMIT_DIR/outputs/03_min.out', 'coord_path': '$SLURM_SUBMIT_DIR/outputs/03_min.nc', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'restart_path': '$SLURM_SUBMIT_DIR/outputs/03_min.rst', 'prev_coordinate_path': None, 'prev_restart_path': '$SLURM_SUBMIT_DIR/outputs/02_min.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'splits': 1, 'sbatch_options': {'nodes': 2, 'ntasks-per-node': 48, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '1-00:00:00', 'cluster': 'mpi', 'partition': 'mpi', 'account': 'jdurrant', 'job-name': 'metalflare/001/03-min'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'chmod +x ./run.sh', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/03-min/run.sh', 'slurm_path': '../simulations/03-min/submit.slurm', 'write': True, 'write_dir': '../simulations/03-min/inputs', 'submit': False, 'yaml_path': '../simulations/slurm.yml', 'run_dir': '$SLURM_SUBMIT_DIR/outputs', 'mdinfo_path': '$SLURM_SUBMIT_DIR/outputs/03_min.mdinfo', 'prev_coord_path': '$SLURM_SUBMIT_DIR/outputs/02_min.nc'}
2023-12-03 22:21:25.753-05:00 | INFO     | metalflare.simulation.amber.run:get_stage_input_lines:151 - Preparing input lines for stage 03_min
2023-12-03 22:21:25.753-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: imin=1,
2023-12-03 22:21:25.753-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntx=1,
2023-12-03 22:21:25.754-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: irest=0,
2023-12-03 22:21:25.754-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntmin=1,
2023-12-03 22:21:25.754-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: maxcyc=5000,
2023-12-03 22:21:25.754-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ncyc=1000,
2023-12-03 22:21:25.754-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntr=1,
2023-12-03 22:21:25.754-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: restraint_wt=2.0,
2023-12-03 22:21:25.754-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: restraintmask="!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')",
2023-12-03 22:21:25.754-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntb=1,
2023-12-03 22:21:25.754-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntf=1,
2023-12-03 22:21:25.754-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntc=1,
2023-12-03 22:21:25.754-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: cut=10.0,
2023-12-03 22:21:25.755-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntxo=2,
2023-12-03 22:21:25.755-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntwr=200,
2023-12-03 22:21:25.755-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntpr=1,
2023-12-03 22:21:25.755-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntwx=200,
2023-12-03 22:21:25.755-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ioutfm=1,
2023-12-03 22:21:25.755-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: iwrap=1,
2023-12-03 22:21:25.755-05:00 | INFO     | metalflare.simulation.amber.run:prepare_stage:210 - Writing input file at ../simulations/03-min/inputs/03_min.in
2023-12-03 22:21:25.755-05:00 | INFO     | metalflare.simulation.amber.run:prepare_stage:219 - Adding stage's amber command to run script
2023-12-03 22:21:25.756-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_run_command:122 - Amber command: %s
2023-12-03 22:21:25.756-05:00 | DEBUG    | metalflare.simulation.contexts:update:164 - Updating context:
{'stage_name': '04_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 1.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}
2023-12-03 22:21:25.756-05:00 | INFO     | metalflare.simulation.amber.run:prepare:243 - Preparing stage 3
2023-12-03 22:21:25.756-05:00 | INFO     | metalflare.simulation.amber.run:prepare_context:25 - Preparing context for Amber simulation
2023-12-03 22:21:25.756-05:00 | DEBUG    | metalflare.simulation.contexts:get:178 - Retrieved context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'mpi', 'cpu_cores': 96, 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 1.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}, 'stage_name': '04_min', 'stages': [{'stage_name': '01_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(@H=)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '02_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(:WAT) & !(@H=) & !(:Na+,Cl-)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '03_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 2.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '04_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 1.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': '$SLURM_SUBMIT_DIR/inputs/03_min.in', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': '$SLURM_SUBMIT_DIR/outputs/03_min.out', 'coord_path': '$SLURM_SUBMIT_DIR/outputs/03_min.nc', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'restart_path': '$SLURM_SUBMIT_DIR/outputs/03_min.rst', 'prev_coordinate_path': None, 'prev_restart_path': '$SLURM_SUBMIT_DIR/outputs/03_min.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'splits': 1, 'sbatch_options': {'nodes': 2, 'ntasks-per-node': 48, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '1-00:00:00', 'cluster': 'mpi', 'partition': 'mpi', 'account': 'jdurrant', 'job-name': 'metalflare/001/03-min'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'chmod +x ./run.sh', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/03-min/run.sh', 'slurm_path': '../simulations/03-min/submit.slurm', 'write': True, 'write_dir': '../simulations/03-min/inputs', 'submit': False, 'yaml_path': '../simulations/slurm.yml', 'run_dir': '$SLURM_SUBMIT_DIR/outputs', 'mdinfo_path': '$SLURM_SUBMIT_DIR/outputs/03_min.mdinfo', 'prev_coord_path': '$SLURM_SUBMIT_DIR/outputs/03_min.nc'}
2023-12-03 22:21:25.756-05:00 | DEBUG    | metalflare.simulation.contexts:update:164 - Updating context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'mpi', 'cpu_cores': 96, 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 1.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}, 'stage_name': '04_min', 'stages': [{'stage_name': '01_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(@H=)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '02_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(:WAT) & !(@H=) & !(:Na+,Cl-)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '03_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 2.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '04_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 1.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': '$SLURM_SUBMIT_DIR/inputs/04_min.in', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': '$SLURM_SUBMIT_DIR/outputs/04_min.out', 'coord_path': '$SLURM_SUBMIT_DIR/outputs/04_min.nc', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'restart_path': '$SLURM_SUBMIT_DIR/outputs/04_min.rst', 'prev_coordinate_path': None, 'prev_restart_path': '$SLURM_SUBMIT_DIR/outputs/03_min.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'splits': 1, 'sbatch_options': {'nodes': 2, 'ntasks-per-node': 48, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '1-00:00:00', 'cluster': 'mpi', 'partition': 'mpi', 'account': 'jdurrant', 'job-name': 'metalflare/001/03-min'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'chmod +x ./run.sh', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/03-min/run.sh', 'slurm_path': '../simulations/03-min/submit.slurm', 'write': True, 'write_dir': '../simulations/03-min/inputs', 'submit': False, 'yaml_path': '../simulations/slurm.yml', 'run_dir': '$SLURM_SUBMIT_DIR/outputs', 'mdinfo_path': '$SLURM_SUBMIT_DIR/outputs/04_min.mdinfo', 'prev_coord_path': '$SLURM_SUBMIT_DIR/outputs/03_min.nc'}
2023-12-03 22:21:25.756-05:00 | INFO     | metalflare.simulation.contexts:validate:210 - Validating with: AmberContextValidator
2023-12-03 22:21:25.756-05:00 | DEBUG    | metalflare.simulation.contexts:get:178 - Retrieved context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'mpi', 'cpu_cores': 96, 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 1.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}, 'stage_name': '04_min', 'stages': [{'stage_name': '01_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(@H=)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '02_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(:WAT) & !(@H=) & !(:Na+,Cl-)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '03_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 2.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '04_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 1.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': '$SLURM_SUBMIT_DIR/inputs/04_min.in', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': '$SLURM_SUBMIT_DIR/outputs/04_min.out', 'coord_path': '$SLURM_SUBMIT_DIR/outputs/04_min.nc', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'restart_path': '$SLURM_SUBMIT_DIR/outputs/04_min.rst', 'prev_coordinate_path': None, 'prev_restart_path': '$SLURM_SUBMIT_DIR/outputs/03_min.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'splits': 1, 'sbatch_options': {'nodes': 2, 'ntasks-per-node': 48, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '1-00:00:00', 'cluster': 'mpi', 'partition': 'mpi', 'account': 'jdurrant', 'job-name': 'metalflare/001/03-min'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'chmod +x ./run.sh', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/03-min/run.sh', 'slurm_path': '../simulations/03-min/submit.slurm', 'write': True, 'write_dir': '../simulations/03-min/inputs', 'submit': False, 'yaml_path': '../simulations/slurm.yml', 'run_dir': '$SLURM_SUBMIT_DIR/outputs', 'mdinfo_path': '$SLURM_SUBMIT_DIR/outputs/04_min.mdinfo', 'prev_coord_path': '$SLURM_SUBMIT_DIR/outputs/03_min.nc'}
2023-12-03 22:21:25.756-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking ff_protein
2023-12-03 22:21:25.757-05:00 | DEBUG    | metalflare.simulation.contexts:validate:226 -   Valid: ff19SB
2023-12-03 22:21:25.757-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking ff_water
2023-12-03 22:21:25.757-05:00 | DEBUG    | metalflare.simulation.contexts:validate:226 -   Valid: opc3
2023-12-03 22:21:25.757-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check ff_dna
2023-12-03 22:21:25.757-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check ff_rna
2023-12-03 22:21:25.757-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check ff_glycam
2023-12-03 22:21:25.757-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check ff_lipid
2023-12-03 22:21:25.757-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check ff_small_molecule
2023-12-03 22:21:25.757-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check ff_ions
2023-12-03 22:21:25.757-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check cation_identity
2023-12-03 22:21:25.757-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check anion_identity
2023-12-03 22:21:25.758-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check system_charge
2023-12-03 22:21:25.758-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check neutralize_charge
2023-12-03 22:21:25.758-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking extra_cations
2023-12-03 22:21:25.758-05:00 | DEBUG    | metalflare.simulation.contexts:validate:233 -   Valid: 0
2023-12-03 22:21:25.758-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking extra_anions
2023-12-03 22:21:25.758-05:00 | DEBUG    | metalflare.simulation.contexts:validate:233 -   Valid: 0
2023-12-03 22:21:25.758-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check solvent_ionic_strength
2023-12-03 22:21:25.758-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check solvent_padding
2023-12-03 22:21:25.758-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check verbosity
2023-12-03 22:21:25.758-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check scratch_dir
2023-12-03 22:21:25.758-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking compute_platform
2023-12-03 22:21:25.759-05:00 | DEBUG    | metalflare.simulation.contexts:validate:226 -   Valid: mpi
2023-12-03 22:21:25.759-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check cpu_cores
2023-12-03 22:21:25.759-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking input_kwargs
2023-12-03 22:21:25.759-05:00 | DEBUG    | metalflare.simulation.contexts:validate:233 -   Valid: {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 1.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}
2023-12-03 22:21:25.759-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check stage_name
2023-12-03 22:21:25.759-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check stages
2023-12-03 22:21:25.759-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check input_dir
2023-12-03 22:21:25.759-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check input_path
2023-12-03 22:21:25.759-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check output_dir
2023-12-03 22:21:25.759-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check output_path
2023-12-03 22:21:25.759-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check coord_path
2023-12-03 22:21:25.760-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check topo_path
2023-12-03 22:21:25.760-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check restart_path
2023-12-03 22:21:25.760-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check prev_coordinate_path
2023-12-03 22:21:25.760-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check prev_restart_path
2023-12-03 22:21:25.760-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check ref_coord_path
2023-12-03 22:21:25.760-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking splits
2023-12-03 22:21:25.760-05:00 | DEBUG    | metalflare.simulation.contexts:validate:233 -   Valid: 1
2023-12-03 22:21:25.760-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check sbatch_options
2023-12-03 22:21:25.760-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check slurm_lines
2023-12-03 22:21:25.760-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check run_path
2023-12-03 22:21:25.760-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check slurm_path
2023-12-03 22:21:25.761-05:00 | DEBUG    | metalflare.simulation.contexts:validate:219 - Checking write
2023-12-03 22:21:25.761-05:00 | DEBUG    | metalflare.simulation.contexts:validate:233 -   Valid: True
2023-12-03 22:21:25.761-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check write_dir
2023-12-03 22:21:25.761-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check submit
2023-12-03 22:21:25.761-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check yaml_path
2023-12-03 22:21:25.761-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check run_dir
2023-12-03 22:21:25.761-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check mdinfo_path
2023-12-03 22:21:25.761-05:00 | DEBUG    | metalflare.simulation.contexts:validate:217 - Cannot check prev_coord_path
2023-12-03 22:21:25.761-05:00 | DEBUG    | metalflare.simulation.contexts:get:178 - Retrieved context:
{'ff_protein': 'ff19SB', 'ff_water': 'opc3', 'ff_dna': None, 'ff_rna': None, 'ff_glycam': None, 'ff_lipid': None, 'ff_small_molecule': None, 'ff_ions': 'ionslm_126_opc3', 'cation_identity': 'Na+', 'anion_identity': 'Cl-', 'system_charge': 0, 'neutralize_charge': True, 'extra_cations': 0, 'extra_anions': 0, 'solvent_ionic_strength': 0.15, 'solvent_padding': 10.0, 'verbosity': None, 'scratch_dir': None, 'compute_platform': 'mpi', 'cpu_cores': 96, 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 1.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}, 'stage_name': '04_min', 'stages': [{'stage_name': '01_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'prev_restart_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(@H=)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '02_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 5.0, 'restraintmask': '!(:WAT) & !(@H=) & !(:Na+,Cl-)', 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '03_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 2.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}, {'stage_name': '04_min', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'input_kwargs': {'imin': 1, 'ntx': 1, 'irest': 0, 'ntmin': 1, 'maxcyc': 5000, 'ncyc': 1000, 'ntr': 1, 'restraint_wt': 1.0, 'restraintmask': "!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')", 'ntb': 1, 'ntf': 1, 'ntc': 1, 'cut': 10.0, 'ntxo': 2, 'ntwr': 200, 'ntpr': 1, 'ntwx': 200, 'ioutfm': 1, 'iwrap': 1}}], 'input_dir': '$SLURM_SUBMIT_DIR/inputs', 'input_path': '$SLURM_SUBMIT_DIR/inputs/04_min.in', 'output_dir': '$SLURM_SUBMIT_DIR/outputs', 'output_path': '$SLURM_SUBMIT_DIR/outputs/04_min.out', 'coord_path': '$SLURM_SUBMIT_DIR/outputs/04_min.nc', 'topo_path': '$SLURM_SUBMIT_DIR/inputs/mol.prmtop', 'restart_path': '$SLURM_SUBMIT_DIR/outputs/04_min.rst', 'prev_coordinate_path': None, 'prev_restart_path': '$SLURM_SUBMIT_DIR/outputs/03_min.rst', 'ref_coord_path': '$SLURM_SUBMIT_DIR/inputs/mol.inpcrd', 'splits': 1, 'sbatch_options': {'nodes': 2, 'ntasks-per-node': 48, 'output': 'slurm-%j.out', 'error': 'slurm-%j.err', 'time': '1-00:00:00', 'cluster': 'mpi', 'partition': 'mpi', 'account': 'jdurrant', 'job-name': 'metalflare/001/03-min'}, 'slurm_lines': ['', '# Load environment', 'module purge', 'module load gcc/8.2.0', 'module load openmpi/4.0.3', 'module load amber/22', '', 'chmod +x ./run.sh', './run.sh', '', 'touch CALC_DONE'], 'run_path': '../simulations/03-min/run.sh', 'slurm_path': '../simulations/03-min/submit.slurm', 'write': True, 'write_dir': '../simulations/03-min/inputs', 'submit': False, 'yaml_path': '../simulations/slurm.yml', 'run_dir': '$SLURM_SUBMIT_DIR/outputs', 'mdinfo_path': '$SLURM_SUBMIT_DIR/outputs/04_min.mdinfo', 'prev_coord_path': '$SLURM_SUBMIT_DIR/outputs/03_min.nc'}
2023-12-03 22:21:25.762-05:00 | INFO     | metalflare.simulation.amber.run:get_stage_input_lines:151 - Preparing input lines for stage 04_min
2023-12-03 22:21:25.762-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: imin=1,
2023-12-03 22:21:25.762-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntx=1,
2023-12-03 22:21:25.762-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: irest=0,
2023-12-03 22:21:25.762-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntmin=1,
2023-12-03 22:21:25.762-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: maxcyc=5000,
2023-12-03 22:21:25.762-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ncyc=1000,
2023-12-03 22:21:25.762-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntr=1,
2023-12-03 22:21:25.762-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: restraint_wt=1.0,
2023-12-03 22:21:25.763-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: restraintmask="!(:WAT) & (@C,CA,N,O,O5',P,O3',C3',C4',C5')",
2023-12-03 22:21:25.763-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntb=1,
2023-12-03 22:21:25.763-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntf=1,
2023-12-03 22:21:25.763-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntc=1,
2023-12-03 22:21:25.763-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: cut=10.0,
2023-12-03 22:21:25.763-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntxo=2,
2023-12-03 22:21:25.763-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntwr=200,
2023-12-03 22:21:25.763-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntpr=1,
2023-12-03 22:21:25.763-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ntwx=200,
2023-12-03 22:21:25.763-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: ioutfm=1,
2023-12-03 22:21:25.763-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_input_lines:157 - Adding input line: iwrap=1,
2023-12-03 22:21:25.764-05:00 | INFO     | metalflare.simulation.amber.run:prepare_stage:210 - Writing input file at ../simulations/03-min/inputs/04_min.in
2023-12-03 22:21:25.764-05:00 | INFO     | metalflare.simulation.amber.run:prepare_stage:219 - Adding stage's amber command to run script
2023-12-03 22:21:25.764-05:00 | DEBUG    | metalflare.simulation.amber.run:get_stage_run_command:122 - Amber command: %s
2023-12-03 22:21:25.764-05:00 | DEBUG    | metalflare.simulation.amber.run:prepare:255 - Writing run script at ../simulations/03-min/run.sh
